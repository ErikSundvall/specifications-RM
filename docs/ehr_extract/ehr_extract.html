<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="description" content="openEHR EHR Extract Information Model specification">
<meta name="keywords" content="EHR, Extract, openehr">
<title>EHR Extract Information Model</title>
<link rel="stylesheet" href="../../resources/css/openehr.css">
<link rel="stylesheet" href="../../resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_ehr_extract_information_model">EHR Extract Information Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_conformance">1.4. Conformance</a></li>
</ul>
</li>
<li><a href="#_requirements">2. Requirements</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#_operational_environment">2.2. Operational Environment</a>
<ul class="sectlevel3">
<li><a href="#_openehr_environments">2.2.1. openEHR Environments</a></li>
<li><a href="#_non_openehr_environments">2.2.2. Non-openEHR Environments</a></li>
<li><a href="#_location_of_information">2.2.3. Location of Information</a></li>
<li><a href="#_granularity_of_extract_data">2.2.4. Granularity of Extract Data</a></li>
<li><a href="#_time">2.2.5. Time</a></li>
</ul>
</li>
<li><a href="#_use_cases">2.3. Use Cases</a>
<ul class="sectlevel3">
<li><a href="#_single_patient_ad_hoc_request">2.3.1. Single Patient, Ad Hoc Request</a></li>
<li><a href="#_multiple_patient_batch_send">2.3.2. Multiple Patient, Batch Send</a></li>
<li><a href="#_previous_versions_and_revision_histories">2.3.3. Previous Versions and Revision Histories</a></li>
<li><a href="#_systematic_update_and_persisted_requests">2.3.4. Systematic Update and Persisted Requests</a></li>
<li><a href="#_sharing_of_non_ehr_openehr_data">2.3.5. Sharing of non-EHR openEHR Data</a></li>
<li><a href="#_provision_of_data_from_non_openehr_systems">2.3.6. Provision of data from non-openEHR Systems</a></li>
<li><a href="#_patient_access_to_health_data">2.3.7. Patient Access to Health Data</a></li>
<li><a href="#_move_of_entire_record">2.3.8. Move of Entire Record</a></li>
<li><a href="#_system_synchronisation">2.3.9. System Synchronisation</a>
<ul class="sectlevel4">
<li><a href="#_mirroring">Mirroring</a></li>
<li><a href="#_the_virtual_ehr">The Virtual EHR</a></li>
</ul>
</li>
<li><a href="#_communication_between_non_openehr_emr_ehr_systems">2.3.10. Communication between non-openEHR EMR/EHR systems</a></li>
</ul>
</li>
<li><a href="#_technical_requirements">2.4. Technical Requirements</a>
<ul class="sectlevel3">
<li><a href="#_specification_of_content">2.4.1. Specification of Content</a></li>
<li><a href="#_specification_of_versions">2.4.2. Specification of Versions</a></li>
<li><a href="#_completeness_of_data">2.4.3. Completeness of Data</a>
<ul class="sectlevel4">
<li><a href="#_references_to_other_parts_of_the_same_ehr">References to Other Parts of the Same EHR</a></li>
<li><a href="#_references_to_other_ehrs">References to Other EHRs</a></li>
<li><a href="#_references_to_resources_outside_the_ehr">References to Resources Outside the EHR</a></li>
<li><a href="#_references_to_demographic_entities">References to Demographic Entities</a></li>
<li><a href="#_archetypes_and_terminology">Archetypes and Terminology</a></li>
</ul>
</li>
<li><a href="#_security_and_privacy">2.4.4. Security and Privacy</a></li>
<li><a href="#_update_basis">2.4.5. Update Basis</a>
<ul class="sectlevel4">
<li><a href="#_persistent_request">Persistent Request</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_design_overview">3. Design Overview</a>
<ul class="sectlevel2">
<li><a href="#_abstract_communication_model">3.1. Abstract Communication Model</a></li>
<li><a href="#_content_model_representation">3.2. Content Model &amp; Representation</a></li>
<li><a href="#_package_structure">3.3. Package Structure</a></li>
</ul>
</li>
<li><a href="#_extract_common_package">4. Extract.common Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_design">4.2. Design</a>
<ul class="sectlevel3">
<li><a href="#_extract_request">4.2.1. Extract Request</a>
<ul class="sectlevel4">
<li><a href="#_content_criteria_specification">Content Criteria Specification</a></li>
<li><a href="#_update_specification">Update Specification</a></li>
<li><a href="#_the_manifest">The Manifest</a></li>
<li><a href="#_version_specification">Version Specification</a></li>
</ul>
</li>
<li><a href="#_extract">4.2.2. Extract</a>
<ul class="sectlevel4">
<li><a href="#_content_specification">Content Specification</a></li>
<li><a href="#_content">Content</a></li>
</ul>
</li>
<li><a href="#_participations_and_demographic_referencing">4.2.3. Participations and Demographic Referencing</a></li>
</ul>
</li>
<li><a href="#_class_descriptions">4.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_extract_request_class">4.3.1. EXTRACT_REQUEST Class</a></li>
<li><a href="#_extract_action_request_class">4.3.2. EXTRACT_ACTION_REQUEST Class</a></li>
<li><a href="#_extract_spec_class">4.3.3. EXTRACT_SPEC Class</a></li>
<li><a href="#_extract_manifest_class">4.3.4. EXTRACT_MANIFEST Class</a></li>
<li><a href="#_extract_entity_manifest_class">4.3.5. EXTRACT_ENTITY_MANIFEST Class</a></li>
<li><a href="#_extract_version_spec_class">4.3.6. EXTRACT_VERSION_SPEC Class</a></li>
<li><a href="#_extract_update_spec_class">4.3.7. EXTRACT_UPDATE_SPEC Class</a></li>
<li><a href="#_extract_class">4.3.8. EXTRACT Class</a></li>
<li><a href="#_extract_chapter_class">4.3.9. EXTRACT_CHAPTER Class</a></li>
<li><a href="#_extract_entity_chapter_class">4.3.10. EXTRACT_ENTITY_CHAPTER Class</a></li>
<li><a href="#_extract_item_class">4.3.11. EXTRACT_ITEM Class</a></li>
<li><a href="#_extract_folder_class">4.3.12. EXTRACT_FOLDER Class</a></li>
<li><a href="#_extract_content_item_class">4.3.13. EXTRACT_CONTENT_ITEM Class</a></li>
<li><a href="#_extract_participation_class">4.3.14. EXTRACT_PARTICIPATION Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_openehr_extract_package">5. The openehr_extract Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a></li>
<li><a href="#_design_2">5.2. Design</a>
<ul class="sectlevel3">
<li><a href="#_openehr_extract_item">5.2.1. openEHR Extract Item</a></li>
<li><a href="#_ehr_extract_structure">5.2.2. EHR Extract Structure</a></li>
<li><a href="#_demographic_referencing">5.2.3. Demographic Referencing</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_2">5.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_openehr_content_item_class">5.3.1. OPENEHR_CONTENT_ITEM Class</a></li>
<li><a href="#_x_versioned_object_class">5.3.2. X_VERSIONED_OBJECT Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_generic_extract_package">6. Generic_extract Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a></li>
<li><a href="#_design_3">6.2. Design</a>
<ul class="sectlevel3">
<li><a href="#_structure">6.2.1. Structure</a>
<ul class="sectlevel4">
<li><a href="#_demographic_referencing_2">Demographic Referencing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_3">6.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_generic_content_item_class">6.3.1. GENERIC_CONTENT_ITEM Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_synchronisation_extracts">7. Synchronisation Extracts</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a></li>
<li><a href="#_class_descriptions_4">7.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_sync_extract_request_class">7.2.1. SYNC_EXTRACT_REQUEST Class</a></li>
<li><a href="#_sync_extract_class">7.2.2. SYNC_EXTRACT Class</a></li>
<li><a href="#_sync_extract_spec_class">7.2.3. SYNC_EXTRACT_SPEC Class</a></li>
<li><a href="#_x_contribution_class">7.2.4. X_CONTRIBUTION Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_message_package">8. The Message package</a>
<ul class="sectlevel2">
<li><a href="#_requirements_2">8.1. Requirements</a></li>
<li><a href="#_design_4">8.2. Design</a>
<ul class="sectlevel3">
<li><a href="#_integrity_and_security">8.2.1. Integrity and Security</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_5">8.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_addressed_message_class">8.3.1. ADDRESSED_MESSAGE Class</a></li>
<li><a href="#_message_class">8.3.2. MESSAGE Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_semantics_of_openehr_and_iso_13606_extracts">9. Semantics of openEHR and ISO 13606 extracts</a>
<ul class="sectlevel2">
<li><a href="#_versioning_semantics">9.1. Versioning Semantics</a></li>
<li><a href="#_creation_semantics">9.2. Creation Semantics</a></li>
</ul>
</li>
<li><a href="#_references">References</a>
<ul class="sectlevel2">
<li><a href="#_publications">Publications</a></li>
<li><a href="#_resources">Resources</a></li>
<li><a href="#_openehr_resources">openEHR Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../../resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_ehr_extract_information_model" class="sect0">EHR Extract Information Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><strong>Issuer</strong>: <a href="http://www.openehr.org/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: STABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Keywords</strong>: EHR, Extract, openehr</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/openehr_block_diagram.png" alt="openEHR components" width="60%">
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> </pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2003 - 2015 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.openehr.org/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="http://www.openehr.org/" class="bare">http://www.openehr.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9%;">
<col style="width: 54%;">
<col style="width: 18%;">
<col style="width: 18%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SPEC-313</strong>. Resolve various open modelling questions in existing Extract spec.<br>
 SPEC-314. Correct modelling inconsistency of every EXTRACT_CHAPTER being related to a single Entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>29 Jun 2011</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.2</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0.1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000189</strong>. Add LOCATABLE.parent. New invariant in EHR_EXTRACT.<br>
 CR-000186: Upgrade EHR_EXTRACT to Release-1.0. Major redevelopment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Feb 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000219</strong>: Use constants instead of literals to refer to terminology in RM.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R Chen</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;1.0</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.96</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.95</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000118</strong>. Make package names lower case.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 Dec 2004</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="4" style="background-color: skyblue;"><p class="tableblock"><strong>R E L E A S E&#160;&#160;&#160;&#160;&#160;0.9</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000041</strong>. Visually differentiate primitive types in openEHR documents.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Oct 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000013</strong>. Change key class names, according to CEN ENV 13606.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Heard,
 D Kalra,
 D Lloyd,
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Sep 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CR-000003</strong>, CR-000004 (changes to versioning and LOCATABLE).  MESSAGE_CONTENT now inherits from LOCATABLE.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,
 Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 Mar 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formally validated using ISE Eiffel 5.2. Revised structure of MESSAGE class to align better with CEN 13606-4. Renamed EHR_EXTRACT.hca_authorising to originator, similar to 13606.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changes post CEN WG meeting Rome Feb 2003. Added attestations to X_TRANSACTION class. Significantly improved documentation of requirements, comparison to CEN 13606-4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 S Heard,<br>
 D Kalra,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Feb 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minor corrections to diagrams and class definitions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z Tun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08 Jan 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added senders_reference to conform to CEN 13606-4:2000 section 7.4.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04 Jan 2003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewritten and restructured as two packages.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Nov 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved part of EHR_EXTRACT into MESSAGE. Allow for multilevel archetypable Folder structures.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale,<br>
 D Kalra,<br>
 D Lloyd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Oct 2002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Taken from EHR RM.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07 Oct 2002</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The work reported in this paper has been funded by a number of organisations, including The University
College, London; The Cooperative Research Centres Program through the Department of the
Prime Minister and Cabinet of the Commonwealth Government of Australia; Ocean Informatics,
Australia.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the openEHR Data Types This document describes the architecture of the openEHR EHR Extract Information Model. This
model formally defines the concepts of ‘extract request’, ‘extract’, various kinds of content including
openEHR and non-openEHR, and a message wrapper. It covers use cases including EHR system
communication, other clinical content messaging, and EHR system synchronisation, as well as providing
an equivalent of the ISO 13606 EHR Extract. Model, used throughout the openEHR Reference Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standards bodies producing health informatics standards;</p>
</li>
<li>
<p>Academic groups using openEHR;</p>
</li>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
<li>
<p>Health data managers.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents">1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The openEHR Architecture Overview (<a href="#openehr_overview">[openehr_overview]</a>);</p>
</li>
<li>
<p>The openEHR EHR Information Model (<a href="#openehr_ehr_rm">[openehr_ehr_rm]</a>);</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status">1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the Stable state. The development version of this document can be found at <a href="http://www.openehr.org/releases/trunk/architecture/rm/ehr_extract_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/ehr_extract_im.pdf</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/browse/SPECPR/?selectedTab=com.atlassian.jira.jira-projects-plugin:issues-panel">specifications issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance">1.4. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR Reference Model specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal, automated derivations from the Reference Model, ITS conformance indicates RM conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">2. Requirements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">2.1. Overview</h3>
<div class="paragraph">
<p>This section describes the requirements that the openEHR Extract Information Model (IM) is
designed to meet. Requirements are expressed in terms of a description of the assumed operational
environments (which acts as a design constraint), a set of use cases, functional and security requirements.
The family of use cases describe coarse-grained information import to and export from health
information systems, using openEHR standardised information structures as the <em>lingua franca</em>. The
Extract IM is neutral with respect to the communication technology used between systems: the information
structures can equally be used in a web services environment or in a messaging environment,
including secure email. The concrete method of communication is therefore not a factor in the scenarios
described here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_operational_environment">2.2. Operational Environment</h3>
<div class="sect3">
<h4 id="_openehr_environments">2.2.1. openEHR Environments</h4>
<div class="paragraph">
<p>The assumed operational openEHR environment for openEHR Extracts is shown in the following figure. In
this figure, a Request for "information from the records of one or more 'subjects'" is created by a
Requesting system. A <em>subject</em> record may be a patient EHR, a Person record in a demographic system,
or any other logically meaningful top-level entity. Responding system(s) reply in the form of one or
more Extracts. The Request/Response interaction is enabled by a transport mechanism and possibly
other services. This be be in the form of comprehensive middleware, web services, or simple point-topoint
protocols such as SMTP (email) transport.</p>
</div>
<div id="operational_environment" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/operational_environment.png" alt="operational environment" width="80%">
</div>
<div class="title">Figure 1. Operational openEHR Environment for Extracts</div>
</div>
<div class="paragraph">
<p>Information in Responding systems is assumed to be in the following form.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each such system contains one or more Subject records (e.g. EHRs); there may be records
for the same Subject in more than one system.</p>
</li>
<li>
<p>Each Subject record consists of one or more Version containers, each of which contains the
version history of a particular piece of content. For an EHR, distinct containers are used for
persistent Compositions (e.g. "medications list", "problem list") and event Compositions
(Compositions created due to patient encounters and other events in the clinical care process).</p>
</li>
<li>
<p>Each Version within a Version container corresponds to one version of the content managed
by that container, in other words the state of a particlar content item at some point in time
when it was committed by a user.</p>
</li>
<li>
<p>Groups of Versions, each one from a different Version container within a Responding system
correspond to Contributions, i.e. the openEHR notion of a "change-set". Any particular
Contribution corresponds to the set of Versions committed at one time, by a particular user
to a particular system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above relationships reveal a hierarchy of potential 1:N relationships in the information accessible
to the requesting system, with Contributions forming an alternative view of the content. At each level
of the hierarchy, a system of identifiers is needed, e.g. to distinguish Subjects, to distinguish Versions
and so on. In some specific circumstances, some of these may be reduced to 1:1 relationships, e.g.
there may be no versioning, removing the need for specific identifiers for versions of an item.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_openehr_environments">2.2.2. Non-openEHR Environments</h4>
<div class="paragraph">
<p>The openEHR Extract defined in this specification can be used in non-openEHR environments, where
the aim is to define messages whose content is expressed as templated archetypes. In general, not
much can be assumed about the internal data architecture of such systems. For the purposes of this
specification, the existence of two levels of information is assumed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'record' or equivalently 'patient' - i.e. a division of information on the basis of subject of
care;</p>
</li>
<li>
<p>'document' (Composition in openEHR), which is the coarsest grain item making up a
record.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Regarding versioning in non-openEHR systems, it is assumed that some systems may support basic
concepts including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>document version;</p>
</li>
<li>
<p>document version set - an identifier of a group of versions of the same logical item;</p>
</li>
<li>
<p>document type / schema type - an identifier of some kind of model, schema or content type of a given document;</p>
</li>
<li>
<p>document type version - the version of document type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A typical environment in which Extracts can be used to send legacy information in archetyped form is
one in which cross-enterprise communications are required, including discharge summaries and referrals.
The content of such messages may be defined in terms of archetypes, and then templated in order
to define the total content of the message.</p>
</div>
</div>
<div class="sect3">
<h4 id="_location_of_information">2.2.3. Location of Information</h4>
<div class="paragraph">
<p>In more advanced environments, there may be a health information location service which obviates
the need for any knowledge on the part of the requestor about which systems contain information on a
particular Subject of interest (e.g. a certain patient); in simpler environments, the requesting system
may need to explicitly identify the target systems of the request. The diagram below illustrates a direct request
and a request mediated by a location service.</p>
</div>
<div id="reference_environment" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/reference_environment.png" alt="reference environment" width="60%">
</div>
<div class="title">Figure 2. Health Information Reference Environment</div>
</div>
<div class="paragraph">
<p>This specification assumes that the EHR Request and Extract is between the Requesting system and
each Responding system, even if the list of relevant Responding systems has been generated by a
location service. In other words, this Extract specification does not encompass the idea of a compendium
of Extracts from multiple Responding systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_granularity_of_extract_data">2.2.4. Granularity of Extract Data</h4>
<div class="paragraph">
<p>In the figure <a href="#operational_environment">Operational openEHR Environment for Extracts</a> the lowest level of information shown in a Responding system is simply marked 'content'.
This corresponds to top-level information structures such as Compositions, Folder trees, Parties
etc in openEHR. Each such content item potentially contains a whole hierarchy of information items,
only some of which is generally of interest to the Requestor. The typical database idea of a "query
result" is usually expected to return only such fine-grained pieces. However, the Extract specification
here only allows for a granularity of Compositions ('documents' etc), rather than fine-grained query
responses which are dealt with by other means. This is because the primary use case of an Extract is
to make parts of an EHR available somewhere else, rather than to intelligently query the record in situ
and return the result.</p>
</div>
</div>
<div class="sect3">
<h4 id="_time">2.2.5. Time</h4>
<div class="paragraph">
<p>Versioned health record systems are 'bitemporal' systems, because they include two notions of time.
Times mentioned in the data relate to real world events or states, such as the time of diagnosis of diabetes,
or the date of discharge of a patient from a hospital. Real world time is distinquished from <em>system
time</em>, which is the time of events in the information system itself, such as committal of
Contributions. Both real world time and system time may need to be specified in a Request.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_use_cases">2.3. Use Cases</h3>
<div class="paragraph">
<p>The following sections describe typical use cases that the Request/Extract model must satisfy.</p>
</div>
<div class="sect3">
<h4 id="_single_patient_ad_hoc_request">2.3.1. Single Patient, Ad Hoc Request</h4>
<div class="paragraph">
<p>A key clinical use case is the need to obtain some or all of a patient&#8217;s EHR from a remote system or
systems. The request is most likely to be made due to the patient having been referred to another provider
(including discharge to tertiary care), but other reasons such as falling ill while travelling will
also figure.</p>
</div>
<div class="paragraph">
<p>The request might be made to an identified system, such as the system of the referring provider, or it
may be made to all systems containing data on the given patient, if a health information location service
is available.</p>
</div>
<div class="paragraph">
<p>The contents of the request may be specified in different ways, either by the clinician and/or the software,
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>get this patient&#8217;s entire EHR from an identified source for the first time;</p>
</li>
<li>
<p>get all changes to this patient&#8217;s EHR from specified (e.g. referring or GP) system since the
last time this was done by me;</p>
</li>
<li>
<p>get persistent Compositions such as "current medications", "problem list" and "allergies and
interactions";</p>
</li>
<li>
<p>get Compositions matching a specific query, such as "blood sugar level measurements during
the last six months".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The meaning of time is content-dependent. For Observations in an openEHR EHR, the sample times
might be specified; for an Evaluation that documents a diagnosis, times for date of onset, date of last
episode, date of resolution could all be specified.</p>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_patient_batch_send">2.3.2. Multiple Patient, Batch Send</h4>
<div class="paragraph">
<p>A very common requirement for pathology laboratories is to be able to send result data for tests done
for a number of patients, on a periodic batch basis, to a known receiver such as a hospital, clinic or
state health system. The batch send is usually seen as a "standing request" by the receiver, and may be
on a periodic basis (e.g. send all the results available every hour), an "as-available" basis, or according
to some other scheme.
Such data are currently often sent as HL7v2, Edifact or other similar messages.</p>
</div>
<div class="paragraph tbd">
<p><strong>To Be Determined</strong>: patient per message? Send trigger?</p>
</div>
<div class="paragraph tbd">
<p><strong>To Be Determined</strong>: Extract may be sent unsolicited - i.e. no Request</p>
</div>
</div>
<div class="sect3">
<h4 id="_previous_versions_and_revision_histories">2.3.3. Previous Versions and Revision Histories</h4>
<div class="paragraph">
<p>In some circumstances, a request may be made for versions other than the latest of certain content.
This might happen due to a study or medico-legal investigation that needs to establish what information
was visible in certain systems at an earlier time. For example there may be a need to determine if
the problem list, list of known allergies, and patient preferences were all compatible with the medications
list at some earlier time.</p>
</div>
<div class="paragraph">
<p>As part of querying for previous versions, the revision histories of Versioned containers might be
requested, in order to allow a user or software agent to determine which Versions are of interest.</p>
</div>
</div>
<div class="sect3">
<h4 id="_systematic_update_and_persisted_requests">2.3.4. Systematic Update and Persisted Requests</h4>
<div class="paragraph">
<p>In larger healthcare delivery environments such as state and regional health services, patients are routinely
treated by multiple providers, some or all of which are part of a large distributed clinical computing
environment. They may visit various clinics, specialists and hospitals, each of which has its
own patient record for each patient. However, there is usually a need for centralised aggregation of
patient data within the overall health authority, with updating required on a routine basis.</p>
</div>
<div class="paragraph">
<p>In such situations, the general requirement is for a request for update, typically for more than one
patient, to be made once, and for it to be acted upon repeatedly until further notice. Specific requirements
may include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>periodic updates of changes since last update, with a specified period;</p>
</li>
<li>
<p>event-driven updates, whereby an update occurs when a certain event occurs in the server,
e.g. "any change to the EHR", "any change to medications or allergies" and so on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For these situations, the request can be persisted in the server. Even for one-off ad hoc requests, the
requestor may require the request to be persisted in the server, so that it can be referred to simply by
an identifier for later invocations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sharing_of_non_ehr_openehr_data">2.3.5. Sharing of non-EHR openEHR Data</h4>
<div class="paragraph">
<p>There will be a need to be able to request information from openEHR systems and services other than
the EHR, such as demographics and workflow, as they are developed. One likely purpose for such
requests is for import from openEHR systems into non-openEHR systems, for example from an
openEHR demographics service to an existing hospital Patient Master index.</p>
</div>
<div class="paragraph">
<p>It should be possible to use the same general form of request as used for an EHR. However, instead of
specifying Extracts of patient records (EHRs), the data shared in these other cases will be whichever
top-level business objects are relevant for that kind of service, e.g. <code>PARTYs</code> for the demographic service
and so on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_provision_of_data_from_non_openehr_systems">2.3.6. Provision of data from non-openEHR Systems</h4>
<div class="paragraph">
<p>One of the major uses of an openEHR system is as a shared EHR system, aggregating data from various
existing systems in a standardised form. Data from such systems may be provided in different
ways, including various messaging forms (HL7, Edifact), various kinds of EMR document (CEN
EN13606, HL7 CDA), and other formats that may or may not be standardised.</p>
</div>
<div class="paragraph">
<p>The developers of some such systems may decide to provide an openEHR-compatible export gateway,
capable of serialising various data into openEHR structures, particularly the Composition /
<code>GENERIC_ENTRY</code> form (see openEHR Integration IM) which is highly flexible and can accommodate
most existing data formats. Types of non-openEHR systems that may supply openEHR Extracts in
this fashion include pathology systems and departmental hospital systems, such as radiology, (RIS),
histopathology and so on.</p>
</div>
<div class="paragraph">
<p>Extract Requests might be specified in openEHR form (i.e. according to this document) or in some
other form, such as web service calls or messages; either way, the logical request is the same, i.e.
which patients, which content, which versions, and the update basis. The responses must be some
subset of the openEHR Extract presented in this document.</p>
</div>
</div>
<div class="sect3">
<h4 id="_patient_access_to_health_data">2.3.7. Patient Access to Health Data</h4>
<div class="paragraph">
<p>Direct access by patients to their own health data outside of clinical encounters is a common aspiration
of e-health programmes around the world. It seems clear that there will be various modes by
which such access will occur, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>patient carrying USB stick or other portable device containing some or all of health record;</p>
</li>
<li>
<p>access from home PC via secure web service to EHR, in a manner similar to online banking;</p>
</li>
<li>
<p>access to EHR data in the form of encrypted email attachments on home PC either sent
unsolicited (e.g. a scan cc:d to patient by imaging lab) or by request of the patient;</p>
</li>
<li>
<p>access to EHR in the waiting rooms of doctors' surgeries, clinics etc via kiosks or normal
PCs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both the USB stick and email scenarios involve asynchronous access of EHR information, and can be
addressed by the EHR Extract.</p>
</div>
<div class="paragraph">
<p>In the case of a portable device, the most obvious need is for the device to act as a synchronising
transport between a home PC containing a copy of patient / family EHRs, and the EHR systems at
various clinics that the patient visits. To achieve this, when changes are made at either place (in the
home record or in the record held at a clinic), it should be possible to copy just the required changes to
the device. In openEHR terms, this corresponds to copying Contributions made since the last synchronisation.</p>
</div>
<div class="paragraph">
<p>The email attachment scenario is more likely to involve Extracts containing either information
requested by the patient in a similar manner as for the ad hoc clinical requests described above (e.g.
most recent test result) or laboratory information in the form of an openEHR Extract, destined for
integration into an openEHR EHR. In the latter case, the information is likely to be in the form of
Compositions containing <code>GENERIC_ENTRIEs</code>, built according to legacy archetypes, although it could
equally be in "pure" openEHR form (i.e. Compositions containing proper openEHR Observations).</p>
</div>
</div>
<div class="sect3">
<h4 id="_move_of_entire_record">2.3.8. Move of Entire Record</h4>
<div class="paragraph">
<p>A patient&#8217;s entire EHR may be moved permanently to another system for various reasons, due to the
patient moving, a permanent transfer of care, or re-organisation of data centres in which EHRs are
managed. This is known as change of custodianship of the record, and is distinct from situations in
which copying and synchronisation take place.</p>
</div>
<div class="paragraph">
<p>The record is deleted (possibly after archival) from active use at the sending system. In these situations,
the usual need is for an interoperable form of the complete EHR (including all previous versions)
to be exported from the existing system and sent to the destination system, since in general the
two systems will not have the same implementation platform, versioning model and so on. In some
cases, the implementations may be identical, allowing a copy and delete operation in native representation
could be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_system_synchronisation">2.3.9. System Synchronisation</h4>
<div class="sect4">
<h5 id="_mirroring">Mirroring</h5>
<div class="paragraph">
<p>Two openEHR systems containing the same kind of data (i.e. EHR, demographic etc) may contain
records that are intended to be logical "mirrors" (i.e. clones) of each other. In some cases, an entire
system may be a clone of another, i.e. a "mirror system". Mirrored records are purely read-only, and
in all cases, the mirror record or system is a slave of its source, and no local updates occur. Synchronisation
is therefore always in one direction only.</p>
</div>
<div class="paragraph">
<p>To maintain the information in mirrored records, an efficient update mechanism is required. The
openEHR Contribution provides the necessary semantic unit because it is the unit of change to any
record in a system, it can also be used as the unit of update to the same record in a mirroring system.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_virtual_ehr">The Virtual EHR</h5>
<div class="paragraph">
<p>If changes are allowed to multiple systems that also systematically synchronise, a "virtual EHR"
exists. This term indicates that the totality of changes taken together form a complete EHR, even if
any any particular instant in any given system, not all such changes are visible. The virtual EHR is the
usual situation in any large-scale distributed e-health environment. Synchronisation might be on an
ad hoc or systematic basis, and may or may not be bidirectional. The difference between a synchronisation
request and any other kind of request is that the request is specified not in terms of a user query
but in terms of bringing the record up to date, regardless of what changes that might require.</p>
</div>
<div class="paragraph">
<p>Due to the way version identification is defined in openEHR (see Common IM, change_control
package), the virtual EHR is directly supported, and synchronisation is possible simply by copying
Versions from one place to another and adding them to the relevant Versioned container at the
receiver end. In a large health computing environment, cloning and mirroring might be used systematically
to achieve a truly de-centralised system.</p>
</div>
<div class="paragraph">
<p>The defining condition of this use case is that one or more (possibly all) records in a system are maintained
as perfect copies of the same records in other systems, with possible delays, depending on
when and how updating occurs.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_communication_between_non_openehr_emr_ehr_systems">2.3.10. Communication between non-openEHR EMR/EHR systems</h4>
<div class="paragraph">
<p>Since the openEHR Extract represents a generic, open standardised specification for representing
clinical information, there is no reason why it cannot be used for systems that not otherwise implement
openEHR. In this case, the Extract content is most likely to consist of Compositions and
Generic_entries, and may or may not contain versioning information, depending on whether versioning
is supported in the generating systems.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_technical_requirements">2.4. Technical Requirements</h3>
<div class="sect3">
<h4 id="_specification_of_content">2.4.1. Specification of Content</h4>
<div class="paragraph">
<p>Content is specifiable in terms of matching criteria. This can take two forms: lists of specific top-level
content items, or queries that specify top-level items in terms of matching subparts.</p>
</div>
<div class="paragraph tbd">
<p>To Be Continued:</p>
</div>
<div class="paragraph">
<p>Queries are expressed in the Archetype Query Language.</p>
</div>
<div class="paragraph tbd">
<p>To Be Continued:</p>
</div>
</div>
<div class="sect3">
<h4 id="_specification_of_versions">2.4.2. Specification of Versions</h4>
<div class="paragraph">
<p>The openEHR Extract supports detailed access to the versioned view of data. Which versions of the
content should be returned can be specified in a number of ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as a version time of the source EHR at which all content should be taken</p>
</li>
<li>
<p>in more specific terms, such as:</p>
<div class="ulist">
<ul>
<li>
<p>time window of committal;</p>
</li>
<li>
<p>with or without revision history, or revision history only;</p>
</li>
<li>
<p>all, some, latest versions of each content item;</p>
</li>
</ul>
</div>
</li>
<li>
<p>in terms of identified Contributions, Contributions since a certain time etc.</p>
</li>
</ul>
</div>
<div class="paragraph tbd">
<p>To Be Continued:</p>
</div>
</div>
<div class="sect3">
<h4 id="_completeness_of_data">2.4.3. Completeness of Data</h4>
<div class="paragraph">
<p>Information transferred in an EHR Extract needs to be self-standing in the clinical sense, i.e. it can be
understood by the requestor without assuming any other means of access to the responding system. In
general, this means that for references of any kind in the transferred EHR data, the Extract needs to
either contain the reference target, or else it must be reasonable to assume that the requestor has independent
access, or else doesn&#8217;t need it.</p>
</div>
<div class="sect4">
<h5 id="_references_to_other_parts_of_the_same_ehr">References to Other Parts of the Same EHR</h5>
<div class="paragraph">
<p>In openEHR, there are two kinds of cross reference within an EHR: <code>LINKs</code> (defined in <code>LOCATABLE</code>),
and hyperlinks (<code>DV_TEXT</code>.<code><em>hyperlink</em></code>). Both of these use a <code>DV_EHR_URI</code> instance to represent the link
target. The contents of the URI are defined in the Architecture Overview.</p>
</div>
<div class="paragraph tbd">
<p><strong>To Be Continued</strong>: Are EHR ids always included in URIs?</p>
</div>
<div class="paragraph">
<p>In some cases, referenced items within the same EHR will need to travel with the originally requested
item, in order for the latter to make sense. For example, a discharge summary or referral might refer
(via <code>LINKs</code>) to other Compositions in the EHR, such as Medication list, Problem list, and lab reports.
On the other hand, there may be links within the requested item to objects that are not required to be
sent in an Extract.</p>
</div>
<div class="paragraph">
<p>Which links should be followed when building an Extract can be specified in terms of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link depth to follow, i.e. how many jumps to continue from the original item; a value of 0
means "don&#8217;t follow any links".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, for <code>LINK</code> instances, the following can be specified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link type to follow, i.e. only follow links whose type attribute matches the specification.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_references_to_other_ehrs">References to Other EHRs</h5>
<div class="paragraph">
<p>References to items in other EHRs may occur within an EHR, e.g. to the EHR of a parent, other relation,
organ donor etc. There is no requirement for such links to be followed when constructing EHR
Extracts.</p>
</div>
</div>
<div class="sect4">
<h5 id="_references_to_resources_outside_the_ehr">References to Resources Outside the EHR</h5>
<div class="paragraph">
<p>Computable references can also be made to external items from within an openEHR EHR. Instances
of the data type DV_URI occurring either on their own or in a <code>DV_TEXT</code> hyperlink are typically used to
refer to resources such as online guidelines and references. Instances of <code>DV_MULTIMEDIA</code> can contain
<code>DV_URI</code> instances that refer to multimedia resources usually within the same provider enterprise, e.g.
radiology images stored in a PACS. Since URIs are by definition globally unique, they remain semantically
valid no matter where the data containing them moves. However, there is no guarantee that
they can always be resolved, as in the case of a URI referring to a PACS image in one provider environment
when transferred to another. This is unlikely to be a problem since images are usually represented
in the EHR as a small (e.g. 200kb) JPG or similar, and it is almost never the intention to have
original image sets (which may be hundreds of Mb) travel with an EHR. Requests to access original
images would be made separately to a request for EHR Extracts.</p>
</div>
</div>
<div class="sect4">
<h5 id="_references_to_demographic_entities">References to Demographic Entities</h5>
<div class="paragraph">
<p>Two kinds of demographic entities are referred to throughout an openEHR EHR. Individual providers
and provider institutions are referenced from <code>PARTY_PROXY</code> objects in the record, via the
external_ref attribute, which contains references to objects within a demographic repository, such as
an openEHR demographic repository, a hospital MPI or a regional or national identity service. The
<code>PARTY_IDENTIFIED</code> subtype of <code>PARTY_PROXY</code> can in addition carry human readable names and
other computational identifiers for the provider in question.</p>
</div>
<div class="paragraph">
<p>The second kind of demographic reference, found in the <code>PARTY_SELF</code> subtype of <code>PARTY_PROXY</code>, is
to the EHR subject (i.e. patient), and may or may not be present in the EHR, depending on the level of
security in place. Where it is present, it is to a record in a demographic or identity system.</p>
</div>
<div class="paragraph">
<p>For the contents of an EHR Extract to make sense to the receiver, referenced demographic items may
have to be included in the Extract, if the receiver has no access to a demographic system containing
the entities. Whether patient demographics are included is a separate matter, since the requestor system
already knows who the patient is, and may or may not need them. The requestor should therefore
be able to specify whether the Extract includes referenced demographic entities other than the subject,
and independently, whether subject demographics should be included.</p>
</div>
</div>
<div class="sect4">
<h5 id="_archetypes_and_terminology">Archetypes and Terminology</h5>
<div class="paragraph">
<p>Another kind of "reference" is terminology codes, stored in instances of the data type <code>DV_TEXT</code> (via
the mapping attribute) and <code>DV_CODED_TEXT</code>.<code><em>defining_code</em></code>. In openEHR systems, all coded terms
(i.e. instances of <code>DV_CODED_TEXT</code>) carry the text value of the code, in the language of the locale of
the EHR. For normal use, this is typically sufficient. However, for the purposes of decision support or
other applications requiring inferencing, the terminology itself needs to be available. This specification
assumes that where the requestor requires inferencing or other terminology capabilities, independent
access to the complete terminology will be obtained.</p>
</div>
<div class="paragraph">
<p>The same assumption is made with respect to archetypes whose identifiers are mentioned in the EHR
data or meta-data: archetype are not themselves included in Extracts, and have to be resolved separately.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_security_and_privacy">2.4.4. Security and Privacy</h4>
<div class="paragraph">
<p>Security becomes one of the most important requirements for the EHR Extract for the obvious reason
of its exposure in potentially uncontrolled environments outside the (supposedly) secure boundaries
of requesting or responding systems. The general requirement is that the contents of an Extract are
based on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the access control rules defined in the <code>EHR_ACCESS</code> object at source;</p>
</li>
<li>
<p>any other access rules defined in policy services or other places;</p>
</li>
<li>
<p>authentication of the requesting user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Digital signing should be used based on the (preferably certified) public key of the requestor. Notarisation
might also be used to provide non-repudiable proof of sending and/or receiving Extracts,
although this is outside the scope of this specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_update_basis">2.4.5. Update Basis</h4>
<div class="paragraph">
<p>In addition to specifying the content a basis for update also needs to be specified. The simplest possible
case is that of an ad hoc one-off query.
More complex cases are periodic update and event-driven update.</p>
</div>
<div class="sect4">
<h5 id="_persistent_request">Persistent Request</h5>
<div class="paragraph tbd">
<p>To Be Continued:</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_overview">3. Design Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_abstract_communication_model">3.1. Abstract Communication Model</h3>
<div class="paragraph">
<p>The openEHR Extract model uses two design ideas. Firstly, the notion of a Request and an Extract
(the reply) are distinguished. Extracts may include a copy of the Request to which the Extract is a
reply, indicating what is actually in the Extract, which may differ from what was requested. Secondly,
the common semantics of Requests and Extracts are modelled in a generic way, with a number of specialised
Request and Extract types being based on the common classes. Different concrete types of
Extract are thus used to satisfy particular groups of requirements, rather than trying to make one kind
of Extract perform all possible tasks. The figure below illustrates key Extract communication scenarios,
along with the various concrete Extract types defined by the model.</p>
</div>
<div id="use_cases" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/use_cases.png" alt="use cases" width="80%">
</div>
<div class="title">Figure 3. Use cases for openEHR Extracts</div>
</div>
<div class="paragraph">
<p>The EHR Extract is just one concrete type of Extract. The other types include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Generic Extract</em>: an Extract type designed for use with non-openEHR systems communicating to openEHR systems, and users of the ISO 13606 Extract specification. The Generic Extract assumes the absolute minimum about what is in a system, while remaining withing the openEHR type system;</p>
</li>
<li>
<p><em>Synchronisation Extract</em>: an Extract used for updating mirrored EHRs across systems; uses Contributions as the grouping concept.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other types of Extract may be defined in the future.</p>
</div>
<div class="paragraph">
<p>The pattern of requests and replies may be controlled in time. The simplest situation is single request,
single reply. Other variants include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>send request, persist in server, and use 'action' requests to obtain an Extract, which may
have differing content each time;</p>
</li>
<li>
<p>send request indicating a repeat period, at which server automatically sends replies;</p>
</li>
<li>
<p>send request indicating a trigger event on which server should send replies.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_content_model_representation">3.2. Content Model &amp; Representation</h3>
<div class="paragraph">
<p>The general situation of any environment from which content needs to be extracted and sent to
another system is that three categories of data may be needed: the 'key' clinical and administrative
information, typically EHR content (e.g. patient blood pressure history); demographic information
(indicating who the patient and professionals are that are mentioned in the clinical information; and
relevant meta-data. These types of information almost always reside in different parts of the source
system environment, but need to be combined within the Extract. The model defined in this specification
allows for content to be flexibly aggregated in an Extract. The model therefore consists of a
generic Extract containment structure into which specific archetyped content can be plugged, with the
whole structure being templated. Each such template corresponds to one extract type, i.e. one message
type. This is visualised in the figure below.</p>
</div>
<div id="extract_archetyping" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/extract_archetyping.png" alt="extract archetyping" width="60%">
</div>
<div class="title">Figure 4. Archetyping of Extracts</div>
</div>
<div class="paragraph">
<p>The templates can be used to generate content in at least two ways. The default approach is to use the
template for a given extract type, say 'referral', to create standard openEHR content according to the
published openEHR EHR Extract schema (which largely re-uses the main openEHR EHR and demographic
schemas). In this approach, every Extract message conforms to the standard schema - an
XML Extract document is 'standard generic openEHR XML' in this case.</p>
</div>
<div class="paragraph">
<p>An alternative approach converts each template into its own schema, to which all instances of that
template conform. Different templates, e.g. discharge summaries and referrals define distinct schemas.
In this method, the XML of any message is specific to its own schema. If changes are required in
the message content, the schema usually has to be re-generated. The two methods are illustrated in
the following figure.</p>
</div>
<div id="representation_options" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/representation_options.png" alt="representation options" width="70%">
</div>
<div class="title">Figure 5. Representation options</div>
</div>
<div class="paragraph">
<p>Which method is used depends on the requirements of the environment and other factors, such as the
stability of the template structures. The sections of this document describing specific kinds of extract
show details of the concrete data representations involved.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_structure">3.3. Package Structure</h3>
<div class="paragraph">
<p>The <code>rm.extract</code> package defines the semantics of Extracts from openEHR data sources, including
EHRs. The UML diagram below illustrates the package structure of the <code>rm.extract</code> package.</p>
</div>
<div id="rm_ehr_extract_packages" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract-packages.svg" alt="RM ehr extract packages">
</div>
<div class="title">Figure 6. rm.ehr_extract package</div>
</div>
<div class="paragraph">
<p>The sub-packages are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>common</code>: semantics common to all Extracts;</p>
</li>
<li>
<p><code>ehr_extract</code>: semantics for the EHR Extract type;</p>
</li>
<li>
<p><code>generic_extract</code>: defines semantics of the Generic Extract type;</p>
</li>
<li>
<p><code>synchronisation_extract</code>: defines semantics of the Synchronisation Extract type;</p>
</li>
<li>
<p><code>message</code>: simple model of a message containing an Extract.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extract_common_package">4. Extract.common Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2">4.1. Overview</h3>
<div class="paragraph">
<p>The <code>rm.extract.common</code> package defines the semantics common to all kinds of Extract requests
and Extracts. Requests and Extracts can be implemented as messages, or used as types in a webservice
environment. In the latter, the Extract request semantics would most likely be replaced by equivalent
service function definitions.</p>
</div>
<div class="paragraph">
<p>The Request contains a detailed specification of the repository content required in the Extract. A
Request is not always needed, and an Extract may be sent unsolicited. Requests can be made persistent
and/or event-driven, supporting various periodic and continuous update scenarios. Each request
may specify the data from one or more entities, e.g. EHRs or subjects.</p>
</div>
<div class="paragraph">
<p>The Extract reply may optionally include a copy of the request. Its main content is in the form of
<em>chapters</em>, under which folders and content items contain the requested content, or as much of it as was
possible to retrieve. Specific types of content item, including openEHR content, generic EMR content,
and demographic content are defined in various sub-packages, How the content is arranged
within folders in each chapter, and across chapters is managed by the use of archetypes and templates
for the Extract/chapter structure. The following uML diagram illustrates the <code>rm.extract.common</code> package.</p>
</div>
<div id="rm_ehr_extract_common" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract.common.svg" alt="RM ehr extract.common">
</div>
<div class="title">Figure 7. rm.extract.common Package</div>
</div>
<div class="paragraph">
<p>The typical instance structure of the <code>EXTRACT_REQUEST</code> and <code>EXTRACT</code> types is illustrated below.</p>
</div>
<div id="abstract_request_extract" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/abstract_request_extract.png" alt="abstract request extract" width="70%">
</div>
<div class="title">Figure 8. Abstract Request and Extract structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_design">4.2. Design</h3>
<div class="sect3">
<h4 id="_extract_request">4.2.1. Extract Request</h4>
<div class="paragraph">
<p>The <code>EXTRACT_REQUEST</code> class consists of an update_spec specifying rules for update (one-off, periodic,
event-driven etc), and an <code><em>extract_spec</em></code>, indicating what information from the target repository is
required. The latter consists of an optional <code><em>version_spec</em></code>, indicating which versions (default is latest)
and a <code><em>manifest</em></code>, specifying which entities (records or subjects, and optionally which items from those
entities should be included.</p>
</div>
<div class="sect4">
<h5 id="_content_criteria_specification">Content Criteria Specification</h5>
<div class="paragraph">
<p>The <code>extract_spec</code> part of the Request applies to all content in the Extract. The attributes are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>extract_type</em>: what kind of Extract this is, e.g. <code>|openehr-ehr|</code>, <code>|openehr-demographic|</code>, <code>|openehr-synchronisation|</code>, <code>|openehr-generic|</code>, <code>|generic-emr|</code>, etc;</p>
</li>
<li>
<p><em>include_multimedia</em>: a flag indicating whether inline binary objects are included or not;</p>
</li>
<li>
<p><em>link_depth</em>: value indicating how many levels of link to follow when constructing the content of the Extract; the default is 0, meaning 'don&#8217;t follow';</p>
</li>
<li>
<p><em>criteria</em>: specifyies queries defining the required content of each entity record;</p>
</li>
<li>
<p><em>other_details</em>: an archetypable structure including further extract details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code><em>criteria</em></code> attribute defines in the form of generic queries (i.e. queries that apply sensibly to any
record) which items are to be retrieved from each entity&#8217;s record. Each query is expressed as a
<code>DV_PARSABLE</code> instance, enabling any formalism to be used. The openEHR archetype query formalisms
(AQL) could be used for example. Query expressions use variables such as $ehr to mean the current
EHR from the <code><em>manifest</em></code> list. Queries may be as simple as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span class="tok-k">SELECT</span> <span class="tok-o">*</span> <span class="tok-k">FROM</span> <span class="tok-err">$</span><span class="tok-n">ehr</span>              <span class="tok-c1">-- get all items in the record</span>
<span class="tok-k">SELECT</span> <span class="tok-o">/</span><span class="tok-n">ehr_access</span> <span class="tok-k">FROM</span> <span class="tok-err">$</span><span class="tok-n">ehr</span>    <span class="tok-c1">-- retrieve the EHR_ACCESS object in an EHR</span>
<span class="tok-k">SELECT</span> <span class="tok-o">/</span><span class="tok-n">ehr_status</span> <span class="tok-k">FROM</span> <span class="tok-err">$</span><span class="tok-n">ehr</span>    <span class="tok-c1">-- retrieve the EHR_STATUS object in an EHR</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>More sophisticated queries can be used to obtain items corresponding to a specific criteria, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span class="tok-k">SELECT</span> <span class="tok-p">....</span>     <span class="tok-c1">-- retrieve last 6 months&#39; worth of blood glucose measurements</span>
<span class="tok-p">...</span>             <span class="tok-c1">-- retrieve ongoing medications list</span>
<span class="tok-p">......</span>          <span class="tok-c1">-- retrieve items relating to active pregnancy</span>
<span class="tok-p">.....</span>           <span class="tok-c1">-- retrieve all GP encounter notes since 12-03-2005</span></code></pre>
</div>
</div>
<div class="paragraph tbd">
<p>To Be Continued:</p>
</div>
</div>
<div class="sect4">
<h5 id="_update_specification">Update Specification</h5>
<div class="paragraph">
<p>The update_spec part of the Request specifies how the Request is to be processed by the server. The
default situation, requiring no update_spec at all, is a one-off request. Other alternatives include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>repeat Reqest with a defined period and/or trigger events;</p>
</li>
<li>
<p>persisting the Request in the server so that the requestor can make later repeat requests by referring to a previously stored request by its identifier.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An ad hoc repeat of a request persisted earlier is made using an <code>EXTRACT_ACTION_REQUEST</code> with
action set to |repeat|. This specifies only the identifier of a request previously specified using an
<code>EXTRACT_REQUEST</code>. Since requests are uniquely identified for all time, there can be no error in the
identification.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_manifest">The Manifest</h5>
<div class="paragraph">
<p>The <code><em>manifest</em></code> that decides the scope of records to be retrieved. In the simplest case, only a single
entity and no specific items will be identified (the content will be determined by the criteria in the
<code>EXTRACT_SPEC</code> object); this will be used in the vast majority of single-patient request scenarios.
However, some scenarios will be of a batch update nature, including pathology lab result update and
situations where patient records are requested corresponding to a list of referrals received by a hospital
since the last such update. In these cases, the request manifest may identify a number of entities
(i.e. records or patients), each of which will be allocated a separate chapter in the resulting Extract.</p>
</div>
<div class="paragraph">
<p>The <code><em>item_list</em></code> of each entity manifest identifies individual items using <code>OBJECT_REF</code> instances each
containing the <code>HIER_OBJECT_ID</code> identifier of a particular top-level object such as a Composition, or
Party. This mechanism for identifying contents of an Extract is only expected to be used when a specific
identifier is known, rather than when items corresponding to filtering criteria are requested. The
latter are specified using the criteria attribute.</p>
</div>
</div>
<div class="sect4">
<h5 id="_version_specification">Version Specification</h5>
<div class="paragraph">
<p>An Extract request in its simplest form has no version specification, corresponding to the assumption
of 'latest available version' for each matched item. However, in some situations there is a need to rettrieve
previous versions, or information about versions. The version specification part of the Extract
request allows this to be done. The possibilities available are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>include_all_versions</em>: the whole version 'stack' of each item matched by the manifest and
retrieval criteria should be returned. Note that the result of this will be all available versions
from the repository in question, which is in general not the same as all versions that have
ever been created, since versions in the same logical version tree may exist at other
repositories due to local modifications that have not been propagated to the target repository
of the Extract Request.</p>
</li>
<li>
<p><em>include_revision_history</em>: this flag indicates whether the revision_history of a
<code>VERSIONED_OBJECT</code> is to be included in the Extract form of the version</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extract">4.2.2. Extract</h4>
<div class="sect4">
<h5 id="_content_specification">Content Specification</h5>
<div class="paragraph">
<p>The <code>EXTRACT</code> consists of a <code><em>request_id</em></code>, an optional <code><em>participations</em></code> list, an optional <code><em>specification</em></code> and a
set of chapters, containing the retrieved content. The <code><em>participations</em></code> attribute denotes parties that were
responsible for creating the Extract. The <code><em>specification</em></code> takes the same form as the extract_spec of the
<code>EXTRACT_REQUEST</code>, but in an <code>EXTRACT</code> instance, indicates the actual contents of the Extract. This
will usually differ in from the request specification in that it will list in the manifest section the actual
entities (and the identifiers they are known by in the receiver system) retrieved, whereas the request
may not specify any entities (it may rely on query criteria), or it may specify a different set of entities
than were retrievable in the receiver system.</p>
</div>
</div>
<div class="sect4">
<h5 id="_content">Content</h5>
<div class="paragraph">
<p>The content of an Extract is contained within the chapters attribute, in the form of one of more
instances of the <code>EXTRACT_CHAPTER</code> class or its subtype <code>EXTRACT_ENTITY_CHAPTER</code>. Within an
<code>EXTRACT_CHAPTER</code> the content attribute contains a folder structure made of <code>EXTRACT_FOLDER</code>
objects which in turn contain the content items. The folder structure is defined by archetypes, and can
be used to separate the parts of a health record, or group items according to some other scheme e.g.
episode. A specific kind of chapter, the <code>EXTRACT_ENTITY_CHAPTER</code>, is used to carry content associated
with a single entity, i.e. patient. This means that an Extract may contain data relating to multiple
entities, i.e. multiple patients.</p>
</div>
<div class="paragraph">
<p>The <code>EXTRACT_CONTENT_ITEM</code> class is subtyped in later sections of this specification to define metadata
for specific kinds of content.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_participations_and_demographic_referencing">4.2.3. Participations and Demographic Referencing</h4>
<div class="paragraph">
<p>A key difference between an 'extract' or in fact any kind of message carrying information out of a
system environment is that the Extract combines in one place information typically found in multiple
services in the original environment. Two kinds of information routinely included in Extracts are clinical
(i.e. EHR / EMR or similar) and demographic data regarding participations of the subject and
other parties in the activities documented in the clinical information.</p>
</div>
<div class="paragraph">
<p>Within the openEHR EHR model, a 'participation' is defined by the <code>PARTICIPATION</code> class in the
<code>rm.common.generic</code> package. Actual participation instances include a performer object (a subtype
of <code>PARTY_PROXY</code>), and optionally an external reference object (type <code>PARTY_REF</code>). The latter contains
a reference to the demographic entity within a demographic service, provider registry or similar.
Within the Extract, participations occur in two places. In the <code>EHR_EXTRACT</code> class, participations are
used to provide information about parties related to the Extract. These are created new with each
Extract (i.e. they are not EHR data that is part of the Extract content. Accordingly, a simplified form
of the <code>PARTICIPATION</code> class is used: <code>EXTRACT_PARTICIPATION</code>. The only difference is that the
performer reference is a simple string, allowing it to contain a GUID reference to a demographic
party included elsewhere in the same Extract.</p>
</div>
<div class="paragraph">
<p>Participations also occur in the actual content of the EHR, and in this case, they original structures are
copied faithfully, including any in-line performer information. If there was an <code><em>external_ref</em></code> present,
pointing to a demographic entity that is also to be included in the Extract, this reference is rewritten to
point to a local copy of the demographic entity (using a GUID), within the Entity chapter of the
Extract.</p>
</div>
<div class="paragraph">
<p>The result of this is that for source data whose original external references are to external demographic
entities, the logical structure is completely preserved within the Extract, with just the reference
being rewritten to the GUID values used in the Extract (which may well come from the original
demographic database or service).</p>
</div>
<div class="paragraph">
<p>A typical arrangement is to dedicate a single chapter to all demographic entities referenced within the
Extract, optionally with an internal Folder structure. Some example arrangements are illustrated in
the EHR and generic Extract sections below.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions">4.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_extract_request_class">4.3.1. EXTRACT_REQUEST Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_REQUEST</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Generic model of a Request for an Extract, containing an Extract specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">LOCATABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extract_spec</strong>: <code>EXTRACT_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specification details of the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>update_spec</strong>: <code>EXTRACT_UPDATE_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update details of the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of this Request, generated by requestor.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_action_request_class">4.3.2. EXTRACT_ACTION_REQUEST Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_ACTION_REQUEST</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Generic model of a Request for an Extract, containing an Extract specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">LOCATABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>request_id</strong>: <code>OBJECT_REF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of previous EXTRACT_REQUEST.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>action</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requested action: cancel, resend, send new.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_spec_class">4.3.3. EXTRACT_SPEC Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_SPEC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Specification of an Extract&#8217;s contents. Subtypes can be used to add details specific to the type of Extract. The specification consists of attributes specifying the directory, and two further groups of attributes in their own classes, namely a version specfication (which versions of information items are to be included) and a manifest (which entities are to be included in the extract).<br>
Use: Used in a request to specify an Extract, as well as to describe what is contained in an Extract.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_spec</strong>: <code>EXTRACT_VERSION_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specification of which versions of information items to include in the Extract. If Void, the default is latest versions only (which is reasonable for non-versioning systems as well).</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>manifest</strong>: <code>EXTRACT_MANIFEST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specification of entities (e.g. records) to include in the Extract.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extract_type</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coded term indicating the type of content required, e.g.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">openehr-ehr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">openehr-demographic</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">generic-emr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">other</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>include_multimedia</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether inline instances of DV_MULTIMEDIA in the source data are included or not.</p></td>
<td class="tableblock halign-left valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>priority</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requested priority of this request to be handled by server. Priority schemes are likely to be local, and use values agreed by both ends.<br>
TBD: alternative is standard coded terms</p></td>
<td class="tableblock halign-left valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>link_depth</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Degree of links to follow emanating from content items specified for inclusion. The kind of links to follow is dependent on the type of Extract.<br>
All items at the target end of followed links at the given depth are also included in the extract; EXTRACT_CONTENT_ITEM.is_primary is used to differentiate.<br>
- 0 = don&#8217;t follow;<br>
- 1 = follow first degree links;<br>
- 2 = follow 2nd degree links;<br>
- &#8230;&#8203;.<br>
- n = follow nth degree links</p></td>
<td class="tableblock halign-left valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>criteria</strong>: <code>List&lt;DV_PARSABLE&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Queries specifying the contents of this Extract.</p></td>
<td class="tableblock halign-left valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_manifest_class">4.3.4. EXTRACT_MANIFEST Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_MANIFEST</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Specification of the candidate entities and optionally top-level items to be included in the Extract.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>entities</strong>: <code>List&lt;EXTRACT_ENTITY_MANIFEST&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of entity manifests uids of items included in the Extract; for openEHR data, these are uids identifying the version containers.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_entity_manifest_class">4.3.5. EXTRACT_ENTITY_MANIFEST Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_ENTITY_MANIFEST</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">The manifest for one entity, identifying the entity and optionally specifying toplevel items to be included in the Extract. The list actually included may be modified by the version_spec part of the specification, and also by the link_depth attribute. In repeat (standing order) requests, the final inclusion may be modified by the send_changes_only flag of the update_spec.<br>
Various identifiers may be provided for the entity; these are to be used by the receiver system to locate the entity. The extract_id_key attribute is used to record the identifier that will be used throughout the Extract for this entity, including in instances of EXTRACT_ENTITY_IDENTIFIER.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extract_id_key</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier by which this entity is known in the Extract. May be one of the other identifiers, e.g. ehr_id or subject_id, or it may be something else, including a simple integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ehr_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EHR / EMR identifier for the entity at the target system.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subject_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject (i.e. patient or similar) identifier for the entity at the target system.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_ids</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Other identifiers that may be used to find the entity at the target system, keyed by type. May include medicare numbers, drivers license number, tax number etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_list</strong>: <code>List&lt;OBJECT_REF&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of uids of items included in the Extract; for openEHR data, these are uids identifying the version containers.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_version_spec_class">4.3.6. EXTRACT_VERSION_SPEC Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_VERSION_SPEC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Specification of what versions should be included in an Extract. By default, only latest versions are included in the Extract, in which case this part of the Extract specification is not needed at all. The attributes include_all_versions and commit_time_interval are used to modify this; the former forces all versions to be included; the latter limits the versions to be those latest versions committed in the time interval, or if include_all_versions is True, all versions committed in the time interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>include_all_versions</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if all versions of each item in the Extract are included.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>commit_time_interval</strong>: <code>DV_INTERVAL&lt;DV_DATE_TIME&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies commit time interval of items to source repository to include in Extract. By default, only latest versions whose commit times fall in the range are included. If include_all_versions is True, then the range includes all versions committed within the interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>include_revision_history</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if revision histories of the items in the Extract are included. If included, it is always the full revision history.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>include_data</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the data of items matched by the content spec should be included. This is the default. If False, only revision history is included in serialised versions. Turning this option on in openEHR systems causes X_VERSIONED_OBJECTs to have revision_history set, but versions Void. Useful for interrogating a server without having to look at any content data. In other systems it may or may not have a sensible meaning.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Includes_revision_history_valid</em></strong>: not include_data implies include_revision_history</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_update_spec_class">4.3.7. EXTRACT_UPDATE_SPEC Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_UPDATE_SPEC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Specification of the how the request should be processed by server. The request can be persisted in the server, meaning that a) it can be re-activated by the requesting system simply by indicating Request id, and b) that a changes-only pattern of Extract updates can be set up. To achieve this, the server has to remember what was send in the previous reponse.<br>
The update mode may be event-driven and periodic update or a mixture of both. The candidate items to be sent each time are the result of re-evaluating the content and versioning parts of the specification; what is actually sent is determined by the send_changes_only flag.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>persist_in_server</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If True, this Request is persisted in the server until further notice.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>repeat_period</strong>: <code>DV_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period for resending update Extracts in response to original Request.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>trigger_events</strong>: <code>List&lt;DV_CODED_TEXT&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of Event names that will cause sending of update Extracts. Event types include:</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">any_change</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- any change in content items matched by content specification, e.g. new versions of persistent compositions. If the content list allows matching of any, or a wide range of archetypes, this event type will match any additions to the record.<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">correction</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">- match error corrections only, including deletions.<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">- match updates (i.e. new versions) of included content items.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>update_method</strong>: <code>CODE_PHRASE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicate mode of update. Can be: send only items that are changed (including logical deletions) or new since last send. For persist_in_server Requests only.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Overall_validity</em></strong>: repeat_period /= Void or trigger_events /= Void</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Trigger_events_validity</em></strong>: trigger_events /= Void implies not trigger_events.is_empty</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Send_changes_only_validity</em></strong>: send_changes_only implies persist_in_server</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_class">4.3.8. EXTRACT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Generic model of an Extract of some information from a repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">LOCATABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>chapters</strong>: <code>List&lt;EXTRACT_CHAPTER&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The content extracted and serialised from the source repository for this Extract.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specification</strong>: <code>EXTRACT_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The specification that this Extract actually conforms to; might not be identical with the specification of the corresponding request.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>request_id</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to causing Request, if any.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time_created</strong>: <code>DV_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>system_id</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sequence_nr</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of this Extract response in sequence of responses to Extract request identified by request_id. If this is the sole response, or there was no request, value is 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>participations</strong>: <code>List&lt;EXTRACT_PARTICIPATION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Participations relevant to the creation of this Extract.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Sequence_nr_valid</em></strong>: sequence_nr &gt;= 1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_chapter_class">4.3.9. EXTRACT_CHAPTER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_CHAPTER</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">One content chapter of an Extract; contains information relating to only one entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">LOCATABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>items</strong>: <code>List&lt;EXTRACT_ITEM&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The information content of this chapter.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_entity_chapter_class">4.3.10. EXTRACT_ENTITY_CHAPTER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_ENTITY_CHAPTER</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Type of chapter that contains information relating to a single demographic entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXTRACT_CHAPTER</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extract_id_key</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to entity, usually a demographic entity such as a patient that the content of this chapter relates to.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_item_class">4.3.11. EXTRACT_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>EXTRACT_ITEM (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract parent of Extract Folder and Content types.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">LOCATABLE</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_folder_class">4.3.12. EXTRACT_FOLDER Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_FOLDER</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Folder in local Folder structure in an Extract. Empty Folders are allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXTRACT_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>items</strong>: <code>List&lt;EXTRACT_ITEM&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Folders and content items in this Folder.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_content_item_class">4.3.13. EXTRACT_CONTENT_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong><em>EXTRACT_CONTENT_ITEM (abstract)</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Abstract model of a wrapper for one content item in an Extract, containing various meta-data. Indicates whether it was part of the primary set and what its original path was. Intended to be subtyped for wrappers of specific types of content.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXTRACT_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_primary</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the content item carried in this container was part of the primary set for the Extract, i.e. not added due to link-following.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_changed</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the content item carried in this container is any kind of change since last send, in repeat sending situations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_masked</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if the content of this item has not been included due to insufficient access rights of requestor.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content object.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique id of this Extract item; used for all referencing from elsewhere in Extract, including from Extract Folders.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Item_validity</em></strong>: is_masked xor item /= Void</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_extract_participation_class">4.3.14. EXTRACT_PARTICIPATION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>EXTRACT_PARTICIPATION</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Model of a participation of a Party (any Actor or Role) in an activity.  Used to represent any participation of a Party in some activity, which is not  explicitly in the model, e.g. assisting nurse. Can be used to record past or  future participations.<br>
Should not be used in place of more permanent relationships between demographic entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time</strong>: <code>DV_INTERVAL&lt;DV_DATE_TIME&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time interval during which the participation took place, if it is used in an observational context (i.e. recording facts about the past); or the intended time interval of the participation when used in future contexts, such as EHR Instructions.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>function</strong>: <code>DV_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The function of the Party in this participation (note that a given party might participate in more than one way in a particular activity). This attribute should be coded, but cannot be limited to the HL7v3:ParticipationFunction vocabulary, since it is too limited and hospital-oriented.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mode</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The mode of the performer / activity interaction, e.g. present, by telephone, by email etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>performer</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uid of demographic entity within Extract who performed this participation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Invariant</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Function_valid</em></strong>: function /= Void and then function.generating_type.is_equal (“DV_CODED_TEXT”) implies terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_participation_function, function.defining_code)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong><em>Mode_valid</em></strong>: mode /= Void and terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_participation_mode, mode.defining_code)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_openehr_extract_package">5. The openehr_extract Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3">5.1. Overview</h3>
<div class="paragraph">
<p>The <code>rm.extract.openehr_extract</code> package defines an openEHR-specific variant of an
<code>EXTRACT_ITEM</code>, which consists of a form of the <code>VERSIONED_OBJECT&lt;T&gt;</code> class from the rm.common.
<code>change_control</code> package suitable for use in Extracts. The Extract form of the class is
<code>X_VERSIONED_OBJECT&lt;T&gt;</code>, and consists of attributes which replicate functional values from the
EHR form of the class. This class is further subtyped via binding to non-generic types corresponding
to the top-level object types of the openEHR EHR.</p>
</div>
<div class="paragraph">
<p>The UML diagram below illustrates the <code>rm.extract.openehr_extract</code> package.</p>
</div>
<div id="rm_openehr_extract" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract.openehr_extract.svg" alt="RM ehr extract.openehr extract">
</div>
<div class="title">Figure 9. rm.extract.openehr_extract Package</div>
</div>
<div class="paragraph">
<p>The following figure illustrates a typical instance structure of an EHR Extract.</p>
</div>
<div id="typical_extract_structure" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/typical_extract_structure.png" alt="typical extract structure" width="80%">
</div>
<div class="title">Figure 10. Typical EHR Extract structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_2">5.2. Design</h3>
<div class="sect3">
<h4 id="_openehr_extract_item">5.2.1. openEHR Extract Item</h4>
<div class="paragraph">
<p>Items from an openEHR sytem included in an EHR Extract are always top-level objects (Composition,
Directory, <code>EHR_EXTRACT</code>, <code>PARTY</code>, etc, and descendants) are expressed in the serialisable form of
descendants of <code>X_VERSIONED_OBJECT&lt;T&gt;</code>. This type provides a standard interoperable way to serialise all or part of <code>VERSIONED_OBJECTs</code> for lossless transmission between systems, regardless of the
likely implementation differences in versioning at each end. Accordingly, <code>X_VERSIONED_OBJECT</code>
turns most functional properties of <code>VERSIONED_OBJECT</code> into data attributes. The two attributes of
most interest are revision_history, which enables the optional inclusion of the complete revision history
from the original <code>VERSIONED_OBJECT</code>, and versions, which allows any or all of the versions to
be included form the original. The revision history can be requested on its own using by setting the
<code><em>includes_data</em></code> flag of the version specification to False.</p>
</div>
<div class="paragraph">
<p>In most scenarios, versions will be included, and revision_history excluded. Each item in
<code>X_VERSIONED_OBJECT</code>.<code><em>versions</em></code> consists of a wrapped copy of an <code>ORIGINAL_VERSION</code> from the
corresponding <code>VERSIONED_OBJECT</code> object in the source system.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ehr_extract_structure">5.2.2. EHR Extract Structure</h4>
<div class="paragraph">
<p>The overall structure of the openEHR EHR for a subject can be replicated with an archetyped Folder
structure that creates the groupings of directory, compositions, ehr_access, and ehr_status that are
found in an openEHR EHR. This use of folders is not mandatory, but is likely to be useful in most
cases, and is the structure shown in the figure <a href="#typical_extract_structure">Typical EHR Extract structure</a> above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_demographic_referencing">5.2.3. Demographic Referencing</h4>
<div class="paragraph">
<p>Within the content an EHR Extract, wherever <code>PARTICIPATION</code> and <code>PARTY_PROXY</code> structures occur
(for the latter, the <code>PARTY_SEL`F and `PARTY_IDENTIFIED</code> descendants), they are preserved intact,
for reasons of fidelity. However, the final 'pointer', i.e. the <code>OBJECT_ID</code>.<code><em>value</em></code> may be rewritten
within the Extract to correctly refer to the intended demographic. A typical <code>S_PARTICIPATION</code>
structure is illustrated at the bottom of the figure <a href="#typical_extract_structure">Typical EHR Extract structure</a>. In this figure, the <code>OBJECT_ID</code>.<code><em>value</em></code> has been
rewritten to refer to the uid (11111111) of the first <code>OPENEHR_CONTENT_ITEM</code> object shown in the figure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2">5.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_openehr_content_item_class">5.3.1. OPENEHR_CONTENT_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>OPENEHR_CONTENT_ITEM</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Form of EHR EXTRACT_ITEM containing openEHR serialised VERSIONED_OBJECTs.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXTRACT_CONTENT_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>X_VERSIONED_OBJECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content object.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_x_versioned_object_class">5.3.2. X_VERSIONED_OBJECT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>X_VERSIONED_OBJECT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Variety of Extract content that consists is a sharable data-oriented version of VERSIONED_OBJECT&lt;T&gt;.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uid of original VERSIONED_OBJECT.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>owner_id</strong>: <code>OBJECT_REF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner_id from original VERSIONED_OBJECT, which identifies source EHR.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time_created</strong>: <code>DV_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creation time of original VERSIONED_OBJECT.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>total_version_count</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of versions in original VERSIONED_OBJECT at time of creation of this X_VERSIONED_OBJECT.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>extract_version_count</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of Versions in this extract for this Versioned object, i.e. the count of items in the versions attribute. May be 0 if only revision history is requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>revision_history</strong>: <code>REVISION_HISTORY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional revision history of the original VERSIONED_OBJECT. If included, it is the complete revision history.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>versions</strong>: <code>List&lt;ORIGINAL_VERSION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or more Versions from the original VERSIONED_OBJECT, according to the Extract specification.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generic_extract_package">6. Generic_extract Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4">6.1. Overview</h3>
<div class="paragraph">
<p>The <code>rm.extract.generic_extract</code> package defines a kind of Extract designed to be used by
non-openEHR systems (including EHR/EMR systems) that want to send data to another system using
openEHR structures defined by archetypes and templates. Such systems typically do not natively contain
standardised data of any kind, and usually have quite variable and idiosyncratic support for versioning.
The following UML diagram illustrates the <code>rm.extract.generic_extract package</code>.</p>
</div>
<div id="rm_generic_extract" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract.generic_extract.svg" alt="RM ehr extract.generic extract">
</div>
<div class="title">Figure 11. rm.extract.generic_extract Package</div>
</div>
<div class="paragraph">
<p>The figure below illustrates the instance structure of a typical <code>GENERIC_EXTRACT</code>. The containment structure
is shown in blue, and content item wrappers (meta-data) in yellow.</p>
</div>
<div id="typical_generic_extract" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/typical_generic_extract.png" alt="typical generic extract" width="80%">
</div>
<div class="title">Figure 12. Typical generic extract structure</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_3">6.2. Design</h3>
<div class="sect3">
<h4 id="_structure">6.2.1. Structure</h4>
<div class="paragraph">
<p>The <code>GENERIC_CONTENT_ITEM</code> subtype of <code>EXTRACT_CONTENT_ITEM</code> defines meta-data more or
less of which can be populated by typical legacy systems, as well as document sources such as
IHE/XDS repositories. Various groups of meta-data are defined: document type / status information,
commit audit details and document lifecycle information.</p>
</div>
<div class="paragraph">
<p>The document meta-data items are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>item_type</em></code>: a coded term indicating the content 'model' or schema, which may be a published standard, and/or some kind of archetype, template or similar content control artefact;</p>
</li>
<li>
<p><code><em>item_type_version</em></code>: version of the <code><em>item_type</em></code> model.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next group of items defines details of creation of the original information. In some systems, this
is the same as 'committal', i.e. the act of creating and committing the original data to the system. In
other cases, the information in the extract is being assembled for the first time for the purposes of the
extract, and the audit information therefore corresponds to this act. The audit details are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>author</em></code>: identity of the author of the original content - this is a UID reference to a demographic item in another part of the current extract;</p>
</li>
<li>
<p><code><em>creation_time</em></code>: date/time when the content was created;</p>
</li>
<li>
<p><code><em>authoriser</em></code>: identity of a professional who authorised this content, if relevant - this is a UID reference to a demographic item in another part of the current extract;</p>
</li>
<li>
<p><code><em>authorisation_time</em></code>: date/time when the content was authorised;</p>
</li>
<li>
<p><code><em>item_status</em></code>: lifecycle status of the content;</p>
</li>
<li>
<p><code><em>version_id</em></code>: version of this particular instance of the content item when it was created and/or committed, in environments where versioning is supported;</p>
</li>
<li>
<p><code><em>version_set_id</em></code>: 'version set' identifier, i.e. identifier of group of versions which together constitute a set of versions in time of a given logical content item;</p>
</li>
<li>
<p><code><em>system_id</em></code>: system where the content was created / committed to / extracted from;</p>
</li>
<li>
<p><code><em>other_details</em></code>: other meta-data, in the form of a keyed list of Strings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these items are optional, reflecting their varying availability in different source systems. An
archetype or template of the Extract may force some or all to be mandatory for specific kinds of
Extract.</p>
</div>
<div class="paragraph">
<p>The <code><em>item</em></code> attribute carries content which may be any openEHR <code>LOCATABLE</code> structure, including
things like <code>COMPOSITION</code>, any kind of <code>ENTRY</code> including <code>GENERIC_ENTRY</code>, <code>ITEM_TREE</code>, or even
<code>CLUSTER</code>. This is assumed to have been converted by some data transformation process from data
within the original system.</p>
</div>
<div class="sect4">
<h5 id="_demographic_referencing_2">Demographic Referencing</h5>
<div class="paragraph">
<p>Within the content a generic Extract, expressed using openEHR <code>COMPOSITIONs</code>, participations are
expressed using intances of <code>PARTICIPATION</code>. This is clearly somewhat inefficient for the required
use here, since they will be constructed on the fly from simpler non-openEHR data, and a more flexible
variant may be required for the future.</p>
</div>
<div class="paragraph tbd">
<p><strong>To Be Determined</strong>: a more efficient participation reference mechanism, to support participations constructed on the fly for the purposes of the Extract.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3">6.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_generic_content_item_class">6.3.1. GENERIC_CONTENT_ITEM Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>GENERIC_CONTENT_ITEM</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Single item in generic extract, designed for 13606 and CDA data.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">EXTRACT_CONTENT_ITEM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_type</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of model or schema used to create the content.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_type_version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of model or schema used to create the content item.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a demographic entity elsewhere in this Extract representing the author of the item version. The reference should be a UID corresponding to the UID of a GENERIC_CONTENT_ITEM containing the demographic information.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>creation_time</strong>: <code>ISO8601_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time of creation of this item version on the original system. This may be an earlier commit time, or it may be the time at which the item was created during the Extract generation process.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>authoriser</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference to a demographic entity elsewhere in this Extract representing an authoriser of the item version, if relevant. The reference should be a UID corresponding to the UID of a GENERIC_CONTENT_ITEM containing the demographic information.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>authorisation_time</strong>: <code>ISO8601_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time of authorisation of this item version on the original system where relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item_status</strong>: <code>DV_CODED_TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Coded lifecycle status of the item.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version id of this item in original system.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version_set_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version set id of this item in original system, where applicable.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>system_id</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of EMR or other system from which the item was created / extracted. Typically in the form of a domain name.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_details</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Other details about the content item.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>item</strong>: <code>LOCATABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content object.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synchronisation_extracts">7. Synchronisation Extracts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5">7.1. Overview</h3>
<div class="paragraph">
<p>The UML diagram below illustrates an Extract variant designed for synchronising two openEHR systems. The
specification only allows for a list of Contributions, or Contributions since a certain Contribution; it
also allows the actual versions to be included or excluded. If they are excluded, you can get just Contributions
on their own - i..e find out what the other system has got.</p>
</div>
<div id="rm_sync_extract" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract.sync_extract.svg" alt="RM ehr extract.sync extract">
</div>
<div class="title">Figure 13. rm.extract.synchronisation_extract Package</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4">7.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_sync_extract_request_class">7.2.1. SYNC_EXTRACT_REQUEST Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>SYNC_EXTRACT_REQUEST</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">MESSAGE_CONTENT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specification</strong>: <code>SYNC_EXTRACT_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sync_extract_class">7.2.2. SYNC_EXTRACT Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>SYNC_EXTRACT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Inherit</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">MESSAGE_CONTENT</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specification</strong>: <code>SYNC_EXTRACT_SPEC</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>items</strong>: <code>List&lt;X_CONTRIBUTION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sync_extract_spec_class">7.2.3. SYNC_EXTRACT_SPEC Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>SYNC_EXTRACT_SPEC</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includes_versions</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contribution_list</strong>: <code>List&lt;HIER_OBJECT_ID&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>contributions_since</strong>: <code>DV_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>all_contributions</strong>: <code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_x_contribution_class">7.2.4. X_CONTRIBUTION Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>X_CONTRIBUTION</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uid</strong>: <code>HIER_OBJECT_ID</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>audit</strong>: <code>AUDIT_DETAILS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>versions</strong>: <code>List&lt;VERSION&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_message_package">8. The Message package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements_2">8.1. Requirements</h3>
<div class="paragraph">
<p>In the first two EHR extract scenarios described in Requirements on page 8, extracts may be received
in response to a request, or they may be unsolicited. Most transfers of care (e.g. discharge summaries
and referrals) and pathology test results will generate unsolicited extracts, whereas solicited requests
will usually occur due to the patient presenting him or herself in another part of the health system
without an explicit transfer of care.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_4">8.2. Design</h3>
<div class="paragraph">
<p>The message package provides the basic abstractions for the sending and receiving of any point to
point message containing a payload, of abstract type <code>MESSAGE</code>. The <code>message</code> Package is illustrated in
the UML diagram below.</p>
</div>
<div id="rm__extract_message" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="../UML/diagrams/RM-ehr_extract.message.svg" alt="RM ehr extract.message">
</div>
<div class="title">Figure 14. rm.message Package</div>
</div>
<div class="paragraph">
<p>A new message is required for each transmission, even if the payload was created once and is retransmitted
multiple times.</p>
</div>
<div class="sect3">
<h4 id="_integrity_and_security">8.2.1. Integrity and Security</h4>
<div class="paragraph">
<p>The <code>MESSAGE</code> object may include a digital hash (i.e. digest or digital finderprint) of the serialised content,
made for example using the SHA-1 or MD5 algorithms. The purpose of the digest is to provide
an integrity check on the data. This protects against non-malicious changes to the data (e.g. due to
software bugs, incorrect transaction management). Often this will be acceptable within secure, closed
environments, such as a private hospital or community health network.</p>
</div>
<div class="paragraph">
<p>Protection against malicious modification can be provided by encryption.</p>
</div>
<div class="paragraph tbd">
<p><strong>To Be Determined</strong>: normalised serialised expression</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5">8.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_addressed_message_class">8.3.1. ADDRESSED_MESSAGE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>ADDRESSED_MESSAGE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sender</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sender_reference</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>addressees</strong>: <code>List&lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>urgency</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>message</strong>: <code>MESSAGE</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_message_class">8.3.2. MESSAGE Class</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Class</strong></p></td>
<td class="tableblock halign-center valign-top" colspan="2" style="background-color: lightblue;"><p class="tableblock"><strong>MESSAGE</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top" colspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Attributes</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Signature</strong></p></td>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>Meaning</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>audit</strong>: <code>AUDIT_DETAILS</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong>: <code>PARTY_PROXY</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>1..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>content</strong>: <code>MESSAGE_CONTENT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: lightblue;"><p class="tableblock"><strong>0..1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>signature</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_semantics_of_openehr_and_iso_13606_extracts">9. Semantics of openEHR and ISO 13606 extracts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_versioning_semantics">9.1. Versioning Semantics</h3>
<div class="paragraph">
<p>Although for most clinical situations, it is the latest versions of Compositions which are sent to a
receiver, there are requirements for various amounts of version-related information to be included, as
described in Requirements on page 8. At a minimum, Compositions always include the audit trail corresponding
to the particular version which the Composition represents. In some cases, historical versions
of a logical Composition are needed for some medico-legal reason. It may even be required that
the receiver system wants to reconstruct a complete facsimile of the versioned object, logically identical
to its form at the source (but most likely stored in a different versioning implementation).
The openEHR extract specification defines the simplest means of satisfying these needs, namely to
include all Compositions in their whole form, including in the case where they are successive versions
of a single logical Composition such as "family history", as illustrated in the figure below. The main
justification for this is that no assumptions should made on sender or receiver systems to do with their
ability to represent or efficiently process versions. Whole Compositions can always be processed by
even the simplest systems.</p>
</div>
<div id="composition_versioning" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/composition_versioning.png" alt="composition versioning">
</div>
<div class="title">Figure 15. Successive Composition versions in a logical Transaction</div>
</div>
<div class="paragraph">
<p>It is assumed that any system that wants to be able to determine things such as who was responsible
for changing a certain fragment of a Composition, when some part of a Composition came into being,
or the differences between two particular versions of a Composition, must have version control capability
locally. This usually means having some implementation of a version control model such as the
one described in the openEHR Common Reference Model, which can do efficient versioning, differencing
and so on. Supplying Compositions in their full form ensures that no assumption is made on
what such an implementation might be.</p>
</div>
<div class="paragraph">
<p>This approach is a departure from the ISO 13606-1:2008 EHR Extract standard, which defines Compositions
so as to include revision history information on every node of the structure. Although it is
not stated in the 13606 specification whether the 'Composition' is in fact supposed to be understood
as a copy of a Composition from an EHR, or as a 'cumulative diff' of Composition versions in an
EHR, analysis shows that only the latter can make sense because the Composition (Composition) is
the unit of creation and modification, and there is logically only one audit trail for each version. Even
the 100th version has associated with it only one audit trail.</p>
</div>
<div class="paragraph">
<p>This raises the question of whether a 'diff' form of Compositions should be used in the openEHR
Extract, conforming to the ISO standard. The approach was not chosen for a number of reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it implies that senders can generate 'diff' information structures and that receivers can process
them, i.e. it makes more assumptions than necessary about the sophistication of systems;</p>
</li>
<li>
<p>the ISO specification appears to be in error with respect to deletions - the sending of logical
deletions does not appear to be handled properly;</p>
</li>
<li>
<p>the sending of deletions is not normally desired, and may be illegal (e.g. in Europe there are
EC directives preventing the sending of statements corrected by clinicians or patients).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is worth contemplating just how complex cumulative difference information would be. The following figure
illustrates the structure generated by the accumulation of only three changes shown in the successive
versions in FIGURE 15. The large numbers of changes likely in persistent Compositions will generate
far more complex structures.</p>
</div>
<div id="cumulative_diff" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/cumulative_diff.png" alt="cumulative diff">
</div>
<div class="title">Figure 16. Generation of Cumulative Difference Form</div>
</div>
<div class="paragraph">
<p>In conclusion, while sending a difference form of Compositions is not out of the question in a future
when EHR systems are routinely capable of sophisticated version handling, it is considered too complex
currently, and the controls over sending deleted information have not been sufficiently well
described.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creation_semantics">9.2. Creation Semantics</h3>
<div class="paragraph">
<p>The following describes an algorithm which guarantees the correct contents of an EHR extract. The
input to the algorithm is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the list of EHR Compositions required in the extract (the "primary" Composition set);</p>
</li>
<li>
<p>optionally a folder structure in which the Compositions are to be structured in the extract;</p>
</li>
<li>
<p>the include_multimedia flag indicating whether DV_MULTIMEDIA content is to be included
inline or not;</p>
</li>
<li>
<p>the follow_links attribute indicating to what depth DV_LINK references emanating from
Compositions should be followed and the Compositions containing the link targets also
included in the extract.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The algorithm is as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a new EHR_EXTRACT including the folder structure;</p>
</li>
<li>
<p>Create a demographics EXTRACT_CHAPTER and write the PARTYs in;</p>
</li>
<li>
<p>For each Composition in the original set, do:</p>
<div class="ulist">
<ul>
<li>
<p>create an X_VERSIONED_COMPOSITION, and set is_primary;</p>
</li>
<li>
<p>for each instance of OBJECT_REF encountered (e.g. PARTY_REF), obtain the target of
the reference from the relevant service, and copy it to the appropriate chapter, e.g.
demographics, access_groups tables with the key = the OBJECT_REF.id;</p>
</li>
<li>
<p>copy/serialise the Composition into the appropriate place in the folder structure
rewriting its OBJECT_REFs so that namespace = "local"</p>
</li>
<li>
<p>for each instance of DV_MULTIMEDIA encountered, include or exclude the content
referred to by the uri or data attributes, according to the include_multimedia flag;</p>
</li>
<li>
<p>according to the value of follow_links, for each instance of DV_LINK encountered (only
from/to Archetyped entities):</p>
</li>
</ul>
</div>
</li>
<li>
<p>follow the links recursively. For each link: create an X_VERSIONED_COMPOSITION;
set is_primary = False, write the path and write the target Compositions in the
extract if not already there;</p>
</li>
<li>
<p>create the DV_LINK objects so that their paths refer correctly to the Compositions in
the Extract;</p>
</li>
</ul>
</div>
<div class="paragraph tbd">
<p>TBD: do something about Access_control objects;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_publications">Publications</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Anderson_1996"></a>[Anderson_1996] Ross Anderson. <strong>Security in Clinical Information Systems</strong>. Available at <a href="http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html" class="bare">http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html</a>.</p>
</li>
<li>
<p><a id="Baretto_2005"></a>[Baretto_2005] Barretto S A. <strong>Designing Guideline-based Workflow-Integrated Electronic Health Records.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf" class="bare">http://www.cis.unisa.edu.au/~cissab/Barretto_PhD_Thesis_Revised_FINAL.pdf</a>.</p>
</li>
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_Heard_2007"></a>[Beale_Heard_2007] Beale T, Heard S. <strong>An Ontology-based Model of Clinical Information.</strong> 2007. pp760-764 Proceedings MedInfo 2007, K. Kuhn et al. (Eds), IOS Publishing 2007. See <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a>.</p>
</li>
<li>
<p><a id="Booch_1994"></a>[Booch_1994] Booch G. <strong>Object-Oriented Analysis and Design with applications. 2nd ed.</strong> Benjamin/Cummings 1994.</p>
</li>
<li>
<p><a id="Browne_2005"></a>[Browne_2005] Browne E D. <strong>Workflow Modelling of Coordinated Inter-Health-Provider Care Plans.</strong> 2005. PhD dissertation, University of South Australia. Available at <a href="http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_browne_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Cimino_1997"></a>[Cimino_1997] Cimino J J. <strong>Desiderata for Controlled Medical vocabularies in the Twenty-First Century.</strong> IMIA WG6 Conference, Jacksonville, Florida, Jan 19-22, 1997.</p>
</li>
<li>
<p><a id="Elstein_1987"></a>[Elstein_1987] Elstein AS, Shulman LS, Sprafka SA. <strong>Medical problem solving: an analysis of clinical reasoning.</strong> Cambridge, MA: Harvard University Press 1987.</p>
</li>
<li>
<p><a id="Elstein_Schwarz_2002"></a>[Elstein_Schwarz_2002] Elstein AS, Schwarz A. <strong>Evidence base of clinical diagnosis: Clinical problem solving and diagnostic decision making: selective review of the cognitive literature.</strong> BMJ 2002;324;729-732.</p>
</li>
<li>
<p><a id="Fowler_1997"></a>[Fowler_1997] Fowler M. <strong>Analysis Patterns: Reusable Object Models.</strong> Addison Wesley 1997</p>
</li>
<li>
<p><a id="Fowler_Scott_2000"></a>[Fowler_Scott_2000] Fowler M, Scott K. <strong>UML Distilled (2nd Ed.).</strong> Addison Wesley Longman 2000.</p>
</li>
<li>
<p><a id="Gray_reuter_1993"></a>[Gray_reuter_1993] Gray J, Reuter A. <strong>Transaction Processing Concepts and Techniques.</strong> Morgan Kaufmann 1993.</p>
</li>
<li>
<p><a id="Hnìtynka_2004"></a>[Hnìtynka_2004] Hnìtynka P, Plášil F. <strong>Distributed Versioning Model for MOF.</strong> Proceedings of WISICT 2004, Cancun, Mexico, A volume in the ACM international conference proceedings series, published by Computer Science Press, Trinity College Dublin Ireland, 2004.</p>
</li>
<li>
<p><a id="Ingram_1995"></a>[Ingram_1995] Ingram D. <strong>The Good European Health Record Project.</strong> Laires, Laderia Christensen, Eds. Health in the New Communications Age. Amsterdam: IOS Press; 1995; pp. 66-74.</p>
</li>
<li>
<p><a id="Kifer_Lausen_Wu_1995"></a>[Kifer_Lausen_Wu_1995] Kifer M, Lausen G, Wu J. <strong>Logical Foundations of Object-Oriented and FrameBased Languages.</strong> JACM May 1995. See See <a href="ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf" class="bare">ftp://ftp.cs.sunysb.edu/pub/TechReports/kifer/flogic.pdf</a>.</p>
</li>
<li>
<p><a id="Kilov_1994"></a>[Kilov_1994] Kilov H. <strong>Information Modelling - an object-oriented approach.</strong> Prentice Hall 1994.</p>
</li>
<li>
<p><a id="Maier_2000"></a>[Maier_2000] Maier M. <strong>Architecting Principles for Systems-of-Systems.</strong> Technical Report, University of Alabama in Huntsville. 2000. Available at <a href="http://www.infoed.com/Open/PAPERS/systems.htm" class="bare">http://www.infoed.com/Open/PAPERS/systems.htm</a></p>
</li>
<li>
<p><a id="Meyer_OOSC2"></a>[Meyer_OOSC2] Meyer B. <strong>Object-oriented Software Construction, 2nd Ed.</strong> Prentice Hall 1997</p>
</li>
<li>
<p><a id="Müller_2003"></a>[Müller_2003] Müller R. <strong>Event-oriented Dnamic Adaptation of Workflows: Model, Architecture, and Implementation.</strong> 2003. PhD dissertation, University of Leipzig. Available at <a href="http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm" class="bare">http://www.openehr.org/publications/workflow/t_mueller_thesis_abstract.htm</a>.</p>
</li>
<li>
<p><a id="Rector_1994"></a>[Rector_1994] Rector A L, Nowlan W A, Kay S. <strong>Foundations for an Electronic Medical Record.</strong> The IMIA Yearbook of Medical Informatics 1992 (Eds. van Bemmel J, McRay A). Stuttgart Schattauer 1994.</p>
</li>
<li>
<p><a id="Richards_1998"></a>[Richards_1998] Richards E G. <strong>Mapping Time - The Calendar and its History.</strong> Oxford University Press 1998.</p>
</li>
<li>
<p><a id="Sowa_2000"></a>[Sowa_2000] Sowa J F. <strong>Knowledge Representation: Logical, philosophical and Computational Foundations.</strong> 2000, Brooks/Cole, California.</p>
</li>
<li>
<p><a id="Sottile_1999"></a>[Sottile_1999] Sottile P.A., Ferrara F.M., Grimson W., Kalra D., and Scherrer J.R. <strong>The holistic healthcare information system. Toward an Electronic Health Record Europe.</strong> 1999. Nov 1999; 259-266.</p>
</li>
<li>
<p><a id="Van_de_Velde_Degoulet_2003"></a>[Van_de_Velde_Degoulet_2003] Van de Velde R, Degoulet P. <strong>Clinical Information Systems: A Component-Based Approach.</strong> 2003. Springer-Verlag New York.</p>
</li>
<li>
<p><a id="Weed_1969"></a>[Weed_1969] Weed LL. <strong>Medical records, medical education and patient care. 6 ed.</strong> Chicago: Year Book Medical Publishers Inc. 1969.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_resources">Resources</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="ENV_13606-1"></a>[ENV_13606-1] <strong>ENV 13606-1 - Electronic healthcare record communication - Part 1: Extended architecture.</strong> CEN/ TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-2"></a>[ENV_13606-2] <strong>ENV 13606-2 - Electronic healthcare record communication - Part 2: Domain term list.</strong> CEN/TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-3"></a>[ENV_13606-3] <strong>ENV 13606-3 - Electronic healthcare record communication - Part 3: Distribution rules.</strong> CEN/TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="ENV_13606-4"></a>[ENV_13606-4] <strong>ENV 13606-4 - Electronic Healthcare Record Communication standard Part 4: Messages for the exchange of information.</strong> CEN/ TC 251 Health Informatics Technical Committee.</p>
</li>
<li>
<p><a id="Corbamed_PIDS"></a>[Corbamed_PIDS] Object Management Group. <strong>Person Identification Service.</strong> March 1999.</p>
</li>
<li>
<p><a id="Corbamed_LQS"></a>[Corbamed_LQS] Object Management Group. <strong>Lexicon Query Service.</strong> March 1999.</p>
</li>
<li>
<p><a id="EHCR_supA_14"></a>[EHCR_supA_14] Dixon R, Grubb P A, Lloyd D, and Kalra D. <strong>Consolidated List of Requirements. EHCR Support Action Deliverable 1.4.</strong> European Commission DGXIII, Brussels; May 2001 59pp Available from <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/del1-4v1_3.PDF</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_35"></a>[EHCR_supA_35] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 3.5: "Final Recommendations to CEN for future work".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCRSupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="EHCR_supA_24"></a>[EHCR_supA_24] Dixon R, Grubb P, Lloyd D. <strong>EHCR Support Action Deliverable 2.4 "Guidelines on Interpretation and implementation of CEN EHCRA".</strong> Oct 2000. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p>[<a id="EHCR_supA_31_32"></a> Lloyd D, et al. <strong>EHCR Support Action Deliverable 3.1&amp;3.2 “Interim Report to CEN”.</strong> July 1998. Available at <a href="http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm" class="bare">http://www.chime.ucl.ac.uk/HealthI/EHCR-SupA/documents.htm</a>.</p>
</li>
<li>
<p><a id="GEHR_del_4"></a>[GEHR_del_4] <strong>Deliverable 4: GEHR Requirements for Clinical Comprehensiveness.</strong> GEHR Project 1992</p>
</li>
<li>
<p><a id="GEHR_del_7"></a>[GEHR_del_7] <strong>Deliverable 7: Clinical Functional Specifications.</strong> GEHR Project 1993</p>
</li>
<li>
<p><a id="GEHR_del_8"></a>[GEHR_del_8] <strong>Deliverable 8: Ethical and legal Requirements of GEHR Architecture and Systems.</strong> GEHR Project 1994</p>
</li>
<li>
<p><a id="GEHR_del_19_20_24"></a>[GEHR_del_19_20_24] <strong>Deliverable 19,20,24: GEHR Architecture.</strong> GEHR Project 30/6/1995</p>
</li>
<li>
<p><a id="GeHR_Aus_gpcg"></a>[GeHR_Aus_gpcg] Heard S. <strong>GEHR Project Australia, GPCG Trial.</strong> Available at <a href="http://www.gehr.org/gpcg/ehra.htm" class="bare">http://www.gehr.org/gpcg/ehra.htm</a>.</p>
</li>
<li>
<p><a id="GeHR_Aus_req"></a>[GeHR_Aus_req] Beale T, Heard S. <strong>GEHR Technical Requirements.</strong> See <a href="http://www.gehr.org/technical/requirements/gehr_requirements.html" class="bare">http://www.gehr.org/technical/requirements/gehr_requirements.html</a>.</p>
</li>
<li>
<p><a id="HL7v3_ballot2"></a>[HL7v3_ballot2] JL7 International. <strong>HL7 version 3 2nd Ballot specification</strong>. Available at <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a>.</p>
</li>
<li>
<p><a id="HL7v3_data_types"></a>[HL7v3_data_types] Schadow G, Biron P. <strong>HL7 version 3 deliverable: Version 3 Data Types.</strong> (2nd ballot 2002 version).</p>
</li>
<li>
<p><a id="IANA"></a>[IANA] IANA. <a href="http://www.iana.org/" class="bare">http://www.iana.org/</a>.</p>
</li>
<li>
<p><a id="IEEE_828"></a>[IEEE_828] IEEE. <strong>IEEE 828-2005: standard for Software Configuration Management Plans.</strong></p>
</li>
<li>
<p><a id="ISO_8601"></a>[ISO_8601] <strong>ISO 8601 standard describing formats for representing times, dates, and durations.</strong> See e.g. <a href="http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html" class="bare">http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html</a> and <a href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html" class="bare">http://www.cl.cam.ac.uk/~mgk25/iso-time.html</a>.</p>
</li>
<li>
<p><a id="ISO_18308"></a>[ISO_18308] Schloeffel P. (Editor). <strong>Requirements for an Electronic Health Record Reference Architecture.</strong> (ISO TC 215/SC N; ISO/WD 18308). International Standards Organisation, Australia, 2002.</p>
</li>
<li>
<p><a id="ISO_20514"></a>[ISO_20514] ISO. <strong>The Integrated Care EHR.</strong> See <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525" class="bare">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=39525</a> .</p>
</li>
<li>
<p><a id="ISO_2788"></a>[ISO_2788] ISO. ISO 2788 <strong>Guide to Establishment and development of monolingual thesauri</strong>.</p>
</li>
<li>
<p><a id="ISO_5964"></a>[ISO_5964] ISO. ISO 5964 <strong>Guide to Establishment and development of multilingual thesauri</strong>.</p>
</li>
<li>
<p><a id="NLM_UML_list"></a>[NLM_UML_list] National Library of Medicine. UMLS Terminologies List. <a href="http://www.nlm.nih.gov/research/umls/metaa1.html" class="bare">http://www.nlm.nih.gov/research/umls/metaa1.html</a>.</p>
</li>
<li>
<p><a id="SNOMED_CT"></a>[SNOMED_CT] IHTSDO. Sytematised Nomenclature for Medicine. See <a href="http://www.ohtsdo.org" class="bare">http://www.ohtsdo.org</a>.</p>
</li>
<li>
<p><a id="Synapses_req_A"></a>[Synapses_req_A] Kalra D. (Editor). <strong>The Synapses User Requirements and Functional Specification (Part A).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1a. 6 chapters, 176 pages.</p>
</li>
<li>
<p><a id="Synapses_req_B"></a>[Synapses_req_B] Grimson W. and Groth T. (Editors). <strong>The Synapses User Requirements and Functional Specification (Part B).</strong> EU Telematics Application Programme, Brussels; 1996; The Synapses Project: Deliverable USER 1.1.1b.</p>
</li>
<li>
<p><a id="Synapses_odp"></a>[Synapses_odp] Kalra D. (Editor). <strong>Synapses ODP Information Viewpoint.</strong> EU Telematics Application Programme, Brussels; 1998; The Synapses Project: Final Deliverable. 10 chapters, 64 pages.</p>
</li>
<li>
<p><a id="rfc_2396"></a>[rfc_2396] Berners-Lee T. <strong>Universal Resource Identifiers in WWW</strong>. Available at <a href="http://www.ietf.org/rfc/rfc2396.txt" class="bare">http://www.ietf.org/rfc/rfc2396.txt</a>. This is a World-Wide Web RFC for global identification of resources. In current use on the web, e.g. by Mosaic, Netscape and similar tools. See <a href="http://www.w3.org/Addressing" class="bare">http://www.w3.org/Addressing</a> for a starting point on URIs.</p>
</li>
<li>
<p><a id="rfc_2440"></a>[rfc_2440] <strong>openPGP</strong>. See <a href="http://www.ietf.org/rfc/rfc2440.txt" class="bare">http://www.ietf.org/rfc/rfc2440.txt</a> and <a href="http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt" class="bare">http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt</a></p>
</li>
<li>
<p><a id="rfc_4122"></a>[rfc_4122] <strong>UUIDs</strong>. IETF. See <a href="http://www.ietf.org/rfc/rfc4122.txt" class="bare">http://www.ietf.org/rfc/rfc4122.txt</a> .</p>
</li>
<li>
<p><a id="UCUM"></a>[UCUM] Schadow G, McDonald C J. <strong>The Unified Code for Units of Measure, Version 1.4</strong> 2000. Regenstrief Institute for Health Care, Indianapolis. See <a href="http://aurora.rg.iupui.edu/UCUM" class="bare">http://aurora.rg.iupui.edu/UCUM</a></p>
</li>
<li>
<p><a id="Xpath"></a>[Xpath] W3C <strong>Xpath 1.0 specification</strong>. 1999. Available at <a href="http://www.w3.org/TR/xpath" class="bare">http://www.w3.org/TR/xpath</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_openehr_resources">openEHR Resources</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="openehr_18308"></a>[openehr_18308] The openEHR Foundation. *Conformance of openEHR architecture to ISO TS 18308, "Requirements for EHR Architectures". See <a href="http://www.openehr.org/releases/trunk/architecture/iso18308_conformance.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/iso18308_conformance.pdf</a> .</p>
</li>
<li>
<p><a id="openEHR_ADL_workbench"></a>[openEHR_ADL_workbench] <strong>The openEHR ADL Workbench</strong>. <a href="http://www.openehr.org/downloads/ADLworkbench/home" class="bare">http://www.openehr.org/downloads/ADLworkbench/home</a> .</p>
</li>
<li>
<p><a id="openehr_CKM"></a>[openehr_CKM] <strong>The openEHR Clinical Knowledge Manager (CKM)</strong>. See <a href="http://www.openEHR.org/ckm" class="bare">http://www.openEHR.org/ckm</a></p>
</li>
<li>
<p><a id="openehr_overview"></a>[openehr_overview] The openEHR Foundation. <strong>The openEHR Architecture Overview.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/overview.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/overview.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_overview"></a>[openehr_am_overview] The openEHR Foundation. <strong>The openEHR Archetypes Technical Overview.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/am/archetype_technical_overview.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/archetype_technical_overview.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_am_principles"></a>[openehr_am_principles] The openEHR Foundation. <strong>Archetype Definitions and Principles.</strong> See <a href="http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/principles/REV_HIST.html" class="bare">http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/principles/REV_HIST.html</a>.</p>
</li>
<li>
<p><a id="openehr_am_adl"></a>[openehr_am_adl] The openEHR Foundation. <strong>Archetype Definition Language (ADL2).</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_aom"></a>[openehr_am_aom] The openEHR Foundation. <strong>Archetype Object Model (AOM2).</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_system"></a>[openehr_am_system] The openEHR Archetype System. See <a href="http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/system/REV_HIST.html" class="bare">http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/system/REV_HIST.html</a> .</p>
</li>
<li>
<p><a id="openehr_am_templates"></a>[openehr_am_templates] The openEHR Foundation. <strong>Template Guide</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/template_guide.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/template_guide.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_identification"></a>[openehr_am_identification] The openEHR Foundation. <strong>Archetype Identification specification.</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_query_aql"></a>[openehr_query_aql] The openEHR Foundation. <strong>The openEHR Archetype Query language (AQL)</strong>. See <a href="https://openehr.atlassian.net/wiki/display/spec/Archetype+Query+Language+Description" class="bare">https://openehr.atlassian.net/wiki/display/spec/Archetype+Query+Language+Description</a> .</p>
</li>
<li>
<p><a id="openehr_rm_data_types"></a>[openehr_rm_data_types] openEHR. <strong>Data Types Information Model.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/rm/data_types_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/data_types_im.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_rm_data_structures"></a>[openehr_rm_data_structures] openEHR. <strong>Data Structures Information Model.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/rm/data_structures_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/data_structures_im.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_rm_common"></a>[openehr_rm_common] openEHR. <strong>Common Information Model.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/rm/common_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/common_im.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_rm_ehr"></a>[openehr_rm_ehr] The openEHR Foundation. <strong>The EHR Information Model</strong>. <a href="http://www.openehr.org/releases/trunk/architecture/rm/ehr_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/ehr_im.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_rm_support"></a>[openehr_rm_support] openEHR. <strong>Support Information Model.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/rm/support_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/support_im.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_terminology"></a>[openehr_terminology] The openEHR Foundation. <strong>The openEHR Terminology</strong> <a href="http://www.openehr.org/releases/trunk/architecture/terminology.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/terminology.pdf</a></p>
</li>
<li>
<p><a id="openehr_terminology_resources"></a>[openehr_terminology_resources] The openEHR Foundation. <strong>The openEHR Terminology project (GitHub)</strong> <a href="https://github.com/openEHR/terminology" class="bare">https://github.com/openEHR/terminology</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-17 15:49:07 BST
</div>
</div>
</body>
</html>